"use client"

import { Navigation } from "@/components/navigation"
import { Home, Brain, ChevronUp } from "lucide-react"
import Link from "next/link"
import { useTheme } from "@/components/theme-provider"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { useEffect, useState } from "react"
import { 
  ConfusionMatrixChart, 
  ROCCurveChart, 
  FeatureImportanceChart, 
  LearningCurveChart,
  ClusteringVisualization,
  RegressionScatterChart
} from './visualizations'
import { ImbalancedDataModule, ModelInterpretabilityModule, TimeSeriesModule, AnomalyDetectionModule, DimensionalityReductionModule, EnsembleLearningModule, ModelDeploymentModule } from './advanced-modules'

export default function MachineLearningPage() {
  const { theme } = useTheme()
  const [activeSection, setActiveSection] = useState<string[]>([])
  const [showScrollTop, setShowScrollTop] = useState(false)

  useEffect(() => {
    const handleScroll = () => {
      setShowScrollTop(window.scrollY > 400)
      
      const sections = ['ml-intro', 'eda', 'data-preprocessing', 'feature-engineering', 'imbalanced-data', 'classification', 'regression', 'clustering', 'time-series', 'anomaly-detection', 'dimensionality-reduction', 'ensemble-learning', 'model-interpretability', 'model-evaluation', 'model-deployment', 'case-studies']
      const current: string[] = []
      
      for (const sectionId of sections) {
        const element = document.getElementById(sectionId)
        if (element) {
          const rect = element.getBoundingClientRect()
          if (rect.top <= 150 && rect.bottom >= 150) {
            current.push(sectionId)
            break
          }
        }
      }
      setActiveSection(current)
    }
    window.addEventListener('scroll', handleScroll)
    handleScroll()
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  return (
    <div className={`min-h-screen ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
      <Navigation />

      {/* é¢åŒ…å±‘å¯¼èˆª */}
      <div className={`${theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border-b sticky top-0 z-10`}>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center space-x-2 h-16">
            <Link href="/" className="flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors">
              <Home size={20} />
              <span className="font-medium">ä¸»é¡µ</span>
            </Link>
            <span className={theme === 'dark' ? 'text-gray-600' : 'text-gray-400'}>/</span>
            <span className={`font-medium ${theme === 'dark' ? 'text-gray-100' : 'text-gray-900'}`}>æœºå™¨å­¦ä¹ </span>
          </div>
        </div>
      </div>

      {/* ä¸»æ ‡é¢˜åŒºåŸŸ */}
      <div className="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className={`text-center mb-12 ${theme === 'dark' ? 'text-gray-100' : 'text-gray-900'}`}>
          <div className="flex items-center justify-center mb-4">
            <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center shadow-lg">
              <Brain className="w-8 h-8 text-white" />
            </div>
          </div>
          <h1 className="text-4xl font-bold mb-3">æœºå™¨å­¦ä¹  - æ•°æ®åˆ†æå¸ˆå¿…å¤‡</h1>
          <p className={`text-lg ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
            ä»é¢„æµ‹ç”¨æˆ·æµå¤±åˆ°é”€å”®é¢„æµ‹ï¼ŒæŒæ¡æ ¸å¿ƒç®—æ³•ï¼Œè§£å†³å®é™…ä¸šåŠ¡é—®é¢˜
          </p>
        </div>

        <div className="flex gap-8">
          {/* å·¦ä¾§å¯¼èˆª */}
          <aside className="hidden lg:block w-64 flex-shrink-0">
            <div className={`sticky top-24 ${theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} rounded-xl border p-6 shadow-lg max-h-[calc(100vh-120px)] overflow-y-auto`}>
              <h3 className={`text-lg font-bold mb-4 ${theme === 'dark' ? 'text-gray-100' : 'text-gray-900'}`}>
                ğŸ“– é¡µé¢å¯¼èˆª
              </h3>
              <nav className="space-y-2">
                {[
                  { id: 'ml-intro', icon: 'ğŸš€', label: 'MLå…¥é—¨' },
                  { id: 'eda', icon: 'ğŸ”', label: 'EDAæ•°æ®æ¢ç´¢' },
                  { id: 'data-preprocessing', icon: 'ğŸ§¹', label: 'æ•°æ®é¢„å¤„ç†' },
                  { id: 'feature-engineering', icon: 'âš™ï¸', label: 'ç‰¹å¾å·¥ç¨‹' },
                  { id: 'imbalanced-data', icon: 'âš–ï¸', label: 'æ ·æœ¬ä¸å‡è¡¡' },
                  { id: 'classification', icon: 'ğŸ²', label: 'åˆ†ç±»ç®—æ³•' },
                  { id: 'regression', icon: 'ğŸ“ˆ', label: 'å›å½’ç®—æ³•' },
                  { id: 'clustering', icon: 'ğŸ”®', label: 'èšç±»ç®—æ³•' },
                  { id: 'time-series', icon: 'ğŸ“‰', label: 'æ—¶é—´åºåˆ—' },
                  { id: 'anomaly-detection', icon: 'ğŸš¨', label: 'å¼‚å¸¸æ£€æµ‹' },
                  { id: 'dimensionality-reduction', icon: 'ğŸ“', label: 'é™ç»´å¯è§†åŒ–' },
                  { id: 'ensemble-learning', icon: 'ğŸ¯', label: 'é›†æˆå­¦ä¹ ' },
                  { id: 'model-interpretability', icon: 'ğŸ’¡', label: 'æ¨¡å‹è§£é‡Š' },
                  { id: 'model-evaluation', icon: 'ğŸ“Š', label: 'è¯„ä¼°è°ƒä¼˜' },
                  { id: 'model-deployment', icon: 'ğŸš€', label: 'éƒ¨ç½²ç›‘æ§' },
                  { id: 'case-studies', icon: 'ğŸ’¼', label: 'å®æˆ˜æ¡ˆä¾‹' }
                ].map(item => (
                  <a
                    key={item.id}
                    href={`#${item.id}`}
                    className={`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-semibold transition-all ${
                      activeSection.includes(item.id)
                        ? 'bg-blue-50 text-blue-600 hover:text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:text-blue-300'
                        : theme === 'dark'
                        ? 'hover:bg-gray-700 text-gray-300 hover:text-blue-400'
                        : 'hover:bg-blue-50 text-gray-700 hover:text-blue-600'
                    }`}
                  >
                    <span>{item.icon}</span>
                    <span>{item.label}</span>
                  </a>
                ))}
              </nav>
            </div>
          </aside>

          {/* ä¸»å†…å®¹åŒº */}
          <main className="flex-1 min-w-0">
            <div className="space-y-8">
              {/* æ ¸å¿ƒä»·å€¼ */}
              <Card className={theme === 'dark' ? 'bg-gradient-to-br from-blue-900/30 to-purple-900/30 border-blue-700' : 'bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200'}>
                <CardContent className="pt-6">
                  <h2 className={`text-2xl font-bold mb-4 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>
                    ğŸ¯ ä¸ºä»€ä¹ˆæ•°æ®åˆ†æå¸ˆè¦å­¦æœºå™¨å­¦ä¹ ï¼Ÿ
                  </h2>
                  <div className="grid grid-cols-3 gap-4 text-center">
                    {[
                      { value: 'é¢„æµ‹æœªæ¥', desc: 'é”€å”®é¢„æµ‹ã€ç”¨æˆ·æµå¤±', icon: 'ğŸ”®' },
                      { value: 'è‡ªåŠ¨åˆ†ç±»', desc: 'å®¢æˆ·åˆ†ç¾¤ã€é£é™©è¯†åˆ«', icon: 'ğŸ¯' },
                      { value: 'æ™ºèƒ½æ¨è', desc: 'å•†å“æ¨èã€å†…å®¹æ¨è', icon: 'ğŸ’¡' }
                    ].map((item, idx) => (
                      <div key={idx} className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-800/50' : 'bg-white/80'}`}>
                        <div className="text-4xl mb-2">{item.icon}</div>
                        <div className={`text-lg font-bold mb-1 ${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'}`}>{item.value}</div>
                        <div className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>{item.desc}</div>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* MODULE 01: æœºå™¨å­¦ä¹ å…¥é—¨ */}
              <section id="ml-intro">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ¯ 01. æœºå™¨å­¦ä¹ å…¥é—¨</h2>
                    </div>
                    <p className="text-blue-50 ml-7">10åˆ†é’Ÿäº†è§£æ ¸å¿ƒæ¦‚å¿µï¼Œå¿«é€Ÿå…¥é—¨æœºå™¨å­¦ä¹ </p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* æ ¸å¿ƒæ¦‚å¿µ */}
                      <div>
                        <h3 className={`text-lg font-bold mb-4 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“š æœºå™¨å­¦ä¹ ä¸‰å¤§ç±»å‹
                        </h3>
                        <div className="space-y-3">
                          <div className={`p-4 rounded-lg border ${theme === 'dark' ? 'bg-blue-900/20 border-blue-700' : 'bg-blue-50 border-blue-200'}`}>
                            <div className="flex items-center justify-between mb-2">
                              <p className={`font-bold text-lg ${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'}`}>ç›‘ç£å­¦ä¹ </p>
                              <span className={`text-xs px-2 py-1 rounded ${theme === 'dark' ? 'bg-gray-700' : 'bg-white'}`}>â­â­â­â­â­</span>
                            </div>
                            <p className={`text-sm mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>æœ‰æ ‡ç­¾æ•°æ®ï¼Œå­¦ä¹ è¾“å…¥åˆ°è¾“å‡ºçš„æ˜ å°„</p>
                            <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              <strong>åº”ç”¨ï¼š</strong>åˆ†ç±»ï¼ˆç”¨æˆ·æµå¤±é¢„æµ‹ï¼‰ã€å›å½’ï¼ˆé”€å”®é¢„æµ‹ï¼‰
                            </p>
                          </div>

                          <div className={`p-4 rounded-lg border ${theme === 'dark' ? 'bg-green-900/20 border-green-700' : 'bg-green-50 border-green-200'}`}>
                            <div className="flex items-center justify-between mb-2">
                              <p className={`font-bold text-lg ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>æ— ç›‘ç£å­¦ä¹ </p>
                              <span className={`text-xs px-2 py-1 rounded ${theme === 'dark' ? 'bg-gray-700' : 'bg-white'}`}>â­â­â­â­</span>
                            </div>
                            <p className={`text-sm mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>æ— æ ‡ç­¾æ•°æ®ï¼Œå‘ç°æ•°æ®å†…åœ¨ç»“æ„</p>
                            <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              <strong>åº”ç”¨ï¼š</strong>èšç±»ï¼ˆå®¢æˆ·åˆ†ç¾¤ï¼‰ã€é™ç»´ï¼ˆç‰¹å¾å‹ç¼©ï¼‰
                            </p>
                          </div>

                          <div className={`p-4 rounded-lg border ${theme === 'dark' ? 'bg-purple-900/20 border-purple-700' : 'bg-purple-50 border-purple-200'}`}>
                            <div className="flex items-center justify-between mb-2">
                              <p className={`font-bold text-lg ${theme === 'dark' ? 'text-purple-400' : 'text-purple-600'}`}>å¼ºåŒ–å­¦ä¹ </p>
                              <span className={`text-xs px-2 py-1 rounded ${theme === 'dark' ? 'bg-gray-700' : 'bg-white'}`}>â­â­</span>
                            </div>
                            <p className={`text-sm mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>é€šè¿‡ä¸ç¯å¢ƒäº¤äº’å­¦ä¹ æœ€ä¼˜ç­–ç•¥</p>
                            <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              <strong>åº”ç”¨ï¼š</strong>æ¨èç³»ç»Ÿã€æ¸¸æˆAIï¼ˆæ•°æ®åˆ†æè¾ƒå°‘ç”¨ï¼‰
                            </p>
                          </div>
                        </div>
                      </div>

                      {/* æ•°æ®åˆ†æå¸ˆå­¦ä¹ è·¯å¾„ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>ğŸ¯ æ•°æ®åˆ†æå¸ˆ12å‘¨å­¦ä¹ è·¯å¾„</h4>
                        <div className="grid grid-cols-3 gap-3">
                          {[
                            { week: 'ç¬¬1-2å‘¨', content: 'PythonåŸºç¡€ + Pandas', result: 'æ•°æ®å¤„ç†' },
                            { week: 'ç¬¬3-4å‘¨', content: 'æ•°æ®é¢„å¤„ç† + ç‰¹å¾å·¥ç¨‹', result: 'æ•°æ®å‡†å¤‡' },
                            { week: 'ç¬¬5-6å‘¨', content: 'åˆ†ç±»ç®—æ³•ï¼ˆé€»è¾‘å›å½’/å†³ç­–æ ‘ï¼‰', result: 'é¢„æµ‹åˆ†ç±»' },
                            { week: 'ç¬¬7-8å‘¨', content: 'å›å½’ç®—æ³•ï¼ˆçº¿æ€§å›å½’ï¼‰', result: 'æ•°å€¼é¢„æµ‹' },
                            { week: 'ç¬¬9-10å‘¨', content: 'èšç±» + æ¨¡å‹è¯„ä¼°', result: 'å®¢æˆ·åˆ†ç¾¤' },
                            { week: 'ç¬¬11-12å‘¨', content: 'å®æˆ˜é¡¹ç›®ï¼ˆæµå¤±é¢„æµ‹ï¼‰', result: 'å®Œæ•´é¡¹ç›®' }
                          ].map((item, idx) => (
                            <div key={idx} className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'}`}>
                              <div className={`text-sm font-bold mb-1 ${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'}`}>{item.week}</div>
                              <div className={`text-xs mb-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{item.content}</div>
                              <div className={`text-xs ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>â†’ {item.result}</div>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* æ ¸å¿ƒåº“ */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ› ï¸ Pythonæ ¸å¿ƒåº“
                        </h3>
                        <div className="grid grid-cols-2 gap-4">
                          {[
                            { lib: 'scikit-learn', purpose: 'æœºå™¨å­¦ä¹ ç®—æ³•', importance: 'â­â­â­â­â­', use: 'åˆ†ç±»/å›å½’/èšç±»' },
                            { lib: 'pandas', purpose: 'æ•°æ®å¤„ç†', importance: 'â­â­â­â­â­', use: 'æ•°æ®æ¸…æ´—/ç‰¹å¾å·¥ç¨‹' },
                            { lib: 'numpy', purpose: 'æ•°å€¼è®¡ç®—', importance: 'â­â­â­â­â­', use: 'çŸ©é˜µè¿ç®—' },
                            { lib: 'matplotlib/seaborn', purpose: 'æ•°æ®å¯è§†åŒ–', importance: 'â­â­â­â­', use: 'ç»“æœå±•ç¤º' }
                          ].map((item, idx) => (
                            <div key={idx} className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-700/50' : 'bg-gray-50'}`}>
                              <div className="flex items-center justify-between mb-2">
                                <code className={`text-sm font-bold ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{item.lib}</code>
                                <span className="text-xs">{item.importance}</span>
                              </div>
                              <p className={`text-xs mb-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{item.purpose}</p>
                              <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>ç”¨é€”ï¼š{item.use}</p>
                            </div>
                          ))}
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-indigo-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-indigo-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 02: EDAæ•°æ®æ¢ç´¢æ€§åˆ†æ */}
              <section id="eda">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ” 02. EDAæ•°æ®æ¢ç´¢æ€§åˆ†æ</h2>
                    </div>
                    <p className="text-indigo-50 ml-7">å»ºæ¨¡å‰å¿…åšï¼80%çš„æ—¶é—´åœ¨EDAï¼Œç†è§£æ•°æ®æ˜¯æˆåŠŸçš„å…³é”®</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* EDAæ ¸å¿ƒæµç¨‹ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gradient-to-r from-indigo-900/30 to-purple-900/30' : 'bg-gradient-to-r from-indigo-50 to-purple-50'} border ${theme === 'dark' ? 'border-indigo-700' : 'border-indigo-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-indigo-300' : 'text-indigo-700'}`}>ğŸ“‹ EDAæ ‡å‡†æµç¨‹ï¼ˆå»ºæ¨¡å‰å¿…åšï¼‰</h4>
                        <div className="grid grid-cols-5 gap-3 text-center">
                          {[
                            { step: '1', title: 'åŸºæœ¬ä¿¡æ¯', icon: 'ğŸ“Š' },
                            { step: '2', title: 'åˆ†å¸ƒåˆ†æ', icon: 'ğŸ“ˆ' },
                            { step: '3', title: 'ç›¸å…³æ€§åˆ†æ', icon: 'ğŸ”—' },
                            { step: '4', title: 'ç¼ºå¤±/å¼‚å¸¸', icon: 'âš ï¸' },
                            { step: '5', title: 'ç‰¹å¾æ´å¯Ÿ', icon: 'ğŸ’¡' }
                          ].map((item, idx) => (
                            <div key={idx} className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'}`}>
                              <div className="text-2xl mb-1">{item.icon}</div>
                              <div className={`text-xs font-bold ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>STEP {item.step}</div>
                              <div className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>{item.title}</div>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* åŸºæœ¬ä¿¡æ¯æ¢ç´¢ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-indigo-400' : 'text-indigo-600'}`}>ğŸ“Š STEP 1: æ•°æ®åŸºæœ¬ä¿¡æ¯ â­â­â­â­â­</h4>
                        <pre className={`text-xs overflow-x-auto p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'} border ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
{`import pandas as pd
import numpy as np

# 1. æŸ¥çœ‹æ•°æ®æ¦‚è§ˆ
print("æ•°æ®å½¢çŠ¶:", df.shape)  # (è¡Œæ•°, åˆ—æ•°)
print("\\nå‰5è¡Œ:\\n", df.head())
print("\\nå5è¡Œ:\\n", df.tail())

# 2. æ•°æ®ç±»å‹å’Œå†…å­˜ä½¿ç”¨
print("\\næ•°æ®ä¿¡æ¯:")
df.info()

# 3. æ•°å€¼åˆ—ç»Ÿè®¡æè¿°
print("\\nç»Ÿè®¡æè¿°:")
print(df.describe())

# 4. ç±»åˆ«åˆ—åˆ†å¸ƒ
print("\\nç±»åˆ«åˆ—åˆ†å¸ƒ:")
for col in df.select_dtypes(include='object').columns:
    print(f"\\n{col}:")
    print(df[col].value_counts())

# 5. ç¼ºå¤±å€¼ç»Ÿè®¡
print("\\nç¼ºå¤±å€¼:")
missing = df.isnull().sum()
missing_pct = (missing / len(df)) * 100
missing_df = pd.DataFrame({
    'Missing_Count': missing,
    'Missing_Percentage': missing_pct
}).sort_values('Missing_Count', ascending=False)
print(missing_df[missing_df['Missing_Count'] > 0])`}
                        </pre>
                      </div>

                      {/* åˆ†å¸ƒåˆ†æ */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“ˆ STEP 2: æ•°æ®åˆ†å¸ƒåˆ†æ â­â­â­â­â­
                        </h3>
                        <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`import matplotlib.pyplot as plt
import seaborn as sns

# è®¾ç½®æ ·å¼
sns.set_style("whitegrid")
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

# 1. æ•°å€¼å‹å˜é‡åˆ†å¸ƒï¼ˆç›´æ–¹å›¾+æ ¸å¯†åº¦ï¼‰
numeric_cols = df.select_dtypes(include=[np.number]).columns
n_cols = 3
n_rows = (len(numeric_cols) + n_cols - 1) // n_cols

fig, axes = plt.subplots(n_rows, n_cols, figsize=(15, n_rows*4))
axes = axes.flatten()

for idx, col in enumerate(numeric_cols):
    df[col].hist(bins=30, ax=axes[idx], alpha=0.7, edgecolor='black')
    axes[idx].set_title(f'{col} åˆ†å¸ƒ', fontsize=12)
    axes[idx].set_ylabel('é¢‘æ•°')
    
    # æ·»åŠ ç»Ÿè®¡ä¿¡æ¯
    mean_val = df[col].mean()
    median_val = df[col].median()
    axes[idx].axvline(mean_val, color='r', linestyle='--', label=f'å‡å€¼: {mean_val:.2f}')
    axes[idx].axvline(median_val, color='g', linestyle='--', label=f'ä¸­ä½æ•°: {median_val:.2f}')
    axes[idx].legend()

plt.tight_layout()
plt.show()

# 2. ç®±çº¿å›¾ï¼ˆè¯†åˆ«å¼‚å¸¸å€¼ï¼‰
fig, axes = plt.subplots(n_rows, n_cols, figsize=(15, n_rows*4))
axes = axes.flatten()

for idx, col in enumerate(numeric_cols):
    df.boxplot(column=col, ax=axes[idx])
    axes[idx].set_title(f'{col} ç®±çº¿å›¾', fontsize=12)
    
    # æ ‡æ³¨å¼‚å¸¸å€¼æ•°é‡
    Q1 = df[col].quantile(0.25)
    Q3 = df[col].quantile(0.75)
    IQR = Q3 - Q1
    outliers = df[(df[col] < Q1 - 1.5*IQR) | (df[col] > Q3 + 1.5*IQR)]
    axes[idx].text(0.5, 0.95, f'å¼‚å¸¸å€¼: {len(outliers)}', 
                   transform=axes[idx].transAxes, ha='center')

plt.tight_layout()
plt.show()

# 3. ååº¦å’Œå³°åº¦åˆ†æ
skewness = df[numeric_cols].skew()
kurtosis = df[numeric_cols].kurt()
print("\\nååº¦ï¼ˆSkewnessï¼‰ï¼š")
print(skewness)
print("\\nå³°åº¦ï¼ˆKurtosisï¼‰ï¼š")
print(kurtosis)`}
                          </pre>
                        </div>
                      </div>

                      {/* ç›¸å…³æ€§åˆ†æ */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ”— STEP 3: ç›¸å…³æ€§åˆ†æ â­â­â­â­â­
                        </h3>
                        <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`# 1. ç›¸å…³ç³»æ•°çŸ©é˜µ
correlation_matrix = df[numeric_cols].corr()

# 2. çƒ­åŠ›å›¾å¯è§†åŒ–
plt.figure(figsize=(12, 10))
sns.heatmap(correlation_matrix, 
            annot=True,  # æ˜¾ç¤ºæ•°å€¼
            fmt='.2f',   # ä¿ç•™2ä½å°æ•°
            cmap='coolwarm',  # é¢œè‰²æ˜ å°„
            center=0,    # ä¸­å¿ƒå€¼
            square=True,
            linewidths=0.5,
            cbar_kws={"shrink": 0.8})
plt.title('ç‰¹å¾ç›¸å…³æ€§çƒ­åŠ›å›¾', fontsize=16, pad=20)
plt.tight_layout()
plt.show()

# 3. æ‰¾å‡ºé«˜ç›¸å…³æ€§ç‰¹å¾å¯¹ï¼ˆå¤šé‡å…±çº¿æ€§é£é™©ï¼‰
high_corr_pairs = []
for i in range(len(correlation_matrix.columns)):
    for j in range(i+1, len(correlation_matrix.columns)):
        if abs(correlation_matrix.iloc[i, j]) > 0.8:
            high_corr_pairs.append((
                correlation_matrix.columns[i],
                correlation_matrix.columns[j],
                correlation_matrix.iloc[i, j]
            ))

print("\\né«˜ç›¸å…³æ€§ç‰¹å¾å¯¹ï¼ˆ|r| > 0.8ï¼‰ï¼š")
for pair in high_corr_pairs:
    print(f"{pair[0]} <-> {pair[1]}: {pair[2]:.3f}")

# 4. ç‰¹å¾ä¸ç›®æ ‡å˜é‡çš„ç›¸å…³æ€§
if 'target' in df.columns:
    target_corr = df[numeric_cols].corrwith(df['target']).sort_values(ascending=False)
    print("\\nä¸ç›®æ ‡å˜é‡çš„ç›¸å…³æ€§ï¼š")
    print(target_corr)
    
    # å¯è§†åŒ–
    plt.figure(figsize=(10, 6))
    target_corr.drop('target').plot(kind='barh')
    plt.xlabel('ç›¸å…³ç³»æ•°')
    plt.title('ç‰¹å¾ä¸ç›®æ ‡å˜é‡çš„ç›¸å…³æ€§')
    plt.tight_layout()
    plt.show()`}
                          </pre>
                        </div>
                      </div>

                      {/* è‡ªåŠ¨åŒ–EDAå·¥å…· */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸš€ è‡ªåŠ¨åŒ–EDAå·¥å…· â­â­â­â­â­
                        </h3>
                        <div className="grid grid-cols-2 gap-4">
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-green-900/20 border border-green-700' : 'bg-green-50 border border-green-200'}`}>
                            <p className={`font-bold mb-2 ${theme === 'dark' ? 'text-green-300' : 'text-green-700'}`}>ydata-profilingï¼ˆåŸpandas-profilingï¼‰</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`# å®‰è£…
pip install ydata-profiling

# ä½¿ç”¨
from ydata_profiling import ProfileReport

profile = ProfileReport(
    df, 
    title="æ•°æ®æ¢ç´¢æŠ¥å‘Š",
    explorative=True
)
profile.to_file("eda_report.html")`}
                            </pre>
                            <p className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              âœ“ ä¸€é”®ç”ŸæˆHTMLæŠ¥å‘Š | âœ“ åŒ…å«æ‰€æœ‰ç»Ÿè®¡ä¿¡æ¯ | âœ“ äº¤äº’å¼å›¾è¡¨
                            </p>
                          </div>
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-orange-900/20 border border-orange-700' : 'bg-orange-50 border border-orange-200'}`}>
                            <p className={`font-bold mb-2 ${theme === 'dark' ? 'text-orange-300' : 'text-orange-700'}`}>Sweetviz</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`# å®‰è£…
pip install sweetviz

# ä½¿ç”¨
import sweetviz as sv

report = sv.analyze(df)
report.show_html("sweetviz_report.html")

# å¯¹æ¯”åˆ†æ
report = sv.compare([train_df, "Train"], 
                    [test_df, "Test"])
report.show_html()`}
                            </pre>
                            <p className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              âœ“ ç¾è§‚çš„å¯è§†åŒ– | âœ“ æ•°æ®é›†å¯¹æ¯” | âœ“ ç›®æ ‡åˆ†æ
                            </p>
                          </div>
                        </div>
                      </div>

                      {/* å®æˆ˜æ¡ˆä¾‹ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-rose-900/20 border border-rose-700' : 'bg-rose-50 border border-rose-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-rose-300' : 'text-rose-700'}`}>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†ç”¨æˆ·è¡Œä¸ºEDA</h4>
                        <div className={`text-sm space-y-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          <p><strong>ä¸šåŠ¡èƒŒæ™¯ï¼š</strong>åˆ†æ10ä¸‡ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œä¸ºæµå¤±é¢„æµ‹å»ºæ¨¡åšå‡†å¤‡</p>
                          <p><strong>å‘ç°1ï¼š</strong>è´­ä¹°é‡‘é¢å‘ˆé•¿å°¾åˆ†å¸ƒï¼Œ80%ç”¨æˆ·<1000å…ƒï¼Œéœ€è¦å¯¹æ•°è½¬æ¢</p>
                          <p><strong>å‘ç°2ï¼š</strong>æµè§ˆæ¬¡æ•°ä¸è´­ä¹°é¢‘ç‡ç›¸å…³æ€§0.65ï¼Œå¯ä½œä¸ºæ ¸å¿ƒç‰¹å¾</p>
                          <p><strong>å‘ç°3ï¼š</strong>15%ç”¨æˆ·æœ‰ç¼ºå¤±å€¼ï¼Œé›†ä¸­åœ¨"ä¼šå‘˜ç­‰çº§"å­—æ®µ</p>
                          <p><strong>å‘ç°4ï¼š</strong>å­˜åœ¨237ä¸ªå¼‚å¸¸è®¢å•ï¼ˆé‡‘é¢>10ä¸‡ï¼‰ï¼Œéœ€å•ç‹¬å¤„ç†</p>
                          <p><strong>ç»“è®ºï¼š</strong>EDAå‘ç°çš„é—®é¢˜ç›´æ¥å½±å“å»ºæ¨¡ç­–ç•¥ï¼Œå¿…é¡»é‡è§†ï¼</p>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-green-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-green-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 03: æ•°æ®é¢„å¤„ç† */}
              <section id="data-preprocessing">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ§¹ 02. æ•°æ®é¢„å¤„ç†</h2>
                    </div>
                    <p className="text-green-50 ml-7">æ•°æ®è´¨é‡å†³å®šæ¨¡å‹æ•ˆæœï¼ŒæŒæ¡æ•°æ®æ¸…æ´—çš„é»„é‡‘æ³•åˆ™</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* ç¼ºå¤±å€¼å¤„ç† */}
                      <div>
                        <h3 className={`text-lg font-bold mb-4 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          â“ ç¼ºå¤±å€¼å¤„ç† â­â­â­â­â­
                        </h3>
                        <div className="grid grid-cols-2 gap-4">
                          {[
                            { method: 'åˆ é™¤æ³•', when: 'ç¼ºå¤±<5%', code: 'df.dropna()', pros: 'ç®€å•ç›´æ¥', cons: 'å¯èƒ½ä¸¢å¤±ä¿¡æ¯' },
                            { method: 'å‡å€¼/ä¸­ä½æ•°å¡«å……', when: 'æ•°å€¼å‹', code: 'df.fillna(df.mean())', pros: 'ä¿ç•™æ•°æ®é‡', cons: 'å¯èƒ½æ‰­æ›²åˆ†å¸ƒ' },
                            { method: 'ä¼—æ•°å¡«å……', when: 'åˆ†ç±»å˜é‡', code: 'df.fillna(df.mode()[0])', pros: 'é€‚åˆç±»åˆ«', cons: 'å¿½ç•¥å˜å¼‚' },
                            { method: 'KNNå¡«å……', when: 'å¤æ‚åœºæ™¯', code: 'KNNImputer()', pros: 'ç²¾ç¡®åº¦é«˜', cons: 'è®¡ç®—å¤æ‚' }
                          ].map((item, idx) => (
                            <div key={idx} className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-700/50' : 'bg-green-50'}`}>
                              <p className={`font-bold text-sm mb-1 ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{item.method}</p>
                              <p className={`text-xs mb-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>åœºæ™¯ï¼š{item.when}</p>
                              <code className={`text-xs block mb-1 ${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'}`}>{item.code}</code>
                              <p className={`text-xs ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>âœ“ {item.pros}</p>
                              <p className={`text-xs ${theme === 'dark' ? 'text-red-400' : 'text-red-600'}`}>âœ— {item.cons}</p>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* Pythonä»£ç ç¤ºä¾‹ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>ğŸ’» Pythonç¼ºå¤±å€¼å¤„ç†å®Œæ•´ä»£ç </h4>
                        <pre className={`text-xs overflow-x-auto p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'} border ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
{`import pandas as pd
from sklearn.impute import KNNImputer

# 1. æ£€æŸ¥ç¼ºå¤±å€¼
print(df.isnull().sum())
print(f"ç¼ºå¤±ç‡: {df.isnull().sum() / len(df) * 100}%")

# 2. æ•°å€¼å‹ï¼šå‡å€¼å¡«å……
df['age'] = df['age'].fillna(df['age'].mean())

# 3. åˆ†ç±»å‹ï¼šä¼—æ•°å¡«å……
df['gender'] = df['gender'].fillna(df['gender'].mode()[0])

# 4. KNNå¡«å……ï¼ˆé«˜çº§ï¼‰
imputer = KNNImputer(n_neighbors=5)
df[['age', 'income']] = imputer.fit_transform(df[['age', 'income']])

# 5. åˆ é™¤ç¼ºå¤±è¿‡å¤šçš„è¡Œ/åˆ—
df = df.dropna(thresh=len(df)*0.8, axis=1)  # åˆ é™¤ç¼ºå¤±>20%çš„åˆ—
df = df.dropna()  # åˆ é™¤å‰©ä½™ç¼ºå¤±è¡Œ`}
                        </pre>
                      </div>

                      {/* å¼‚å¸¸å€¼å¤„ç† */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          âš¡ å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç† â­â­â­â­
                        </h3>
                        <div className="space-y-3">
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                            <h5 className={`font-bold mb-2 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>æ–¹æ³•1ï¼šIQRæ³•ï¼ˆå››åˆ†ä½è·ï¼‰â­â­â­â­â­</h5>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`Q1 = df['price'].quantile(0.25)
Q3 = df['price'].quantile(0.75)
IQR = Q3 - Q1
lower = Q1 - 1.5 * IQR
upper = Q3 + 1.5 * IQR
df = df[(df['price'] >= lower) & (df['price'] <= upper)]  # åˆ é™¤å¼‚å¸¸å€¼`}
                            </pre>
                          </div>
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                            <h5 className={`font-bold mb-2 ${theme === 'dark' ? 'text-purple-300' : 'text-purple-700'}`}>æ–¹æ³•2ï¼šZ-scoreæ³• â­â­â­â­</h5>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from scipy import stats
z_scores = np.abs(stats.zscore(df['price']))
df = df[z_scores < 3]  # ä¿ç•™Z-score < 3çš„æ•°æ®`}
                            </pre>
                          </div>
                        </div>
                      </div>

                      {/* æ•°æ®ç¼–ç  */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ”¢ ç±»åˆ«å˜é‡ç¼–ç  â­â­â­â­â­
                        </h3>
                        <div className="overflow-x-auto">
                          <table className="w-full text-sm">
                            <thead>
                              <tr className={`border-b-2 ${theme === 'dark' ? 'border-gray-600' : 'border-gray-300'}`}>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ç¼–ç æ–¹æ³•</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>é€‚ç”¨åœºæ™¯</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ä»£ç </th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>é‡è¦æ€§</th>
                              </tr>
                            </thead>
                            <tbody>
                              {[
                                { method: 'Label Encoding', use: 'æœ‰åºç±»åˆ«ï¼ˆä½/ä¸­/é«˜ï¼‰', code: 'LabelEncoder()', importance: 'â­â­â­â­' },
                                { method: 'One-Hot Encoding', use: 'æ— åºç±»åˆ«ï¼ˆåŸå¸‚åï¼‰', code: 'pd.get_dummies()', importance: 'â­â­â­â­â­' },
                                { method: 'Target Encoding', use: 'é«˜åŸºæ•°ç±»åˆ«', code: 'category_encoders', importance: 'â­â­â­' }
                              ].map((row, idx) => (
                                <tr key={idx} className={`border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
                                  <td className={`py-2 px-3 font-semibold ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{row.method}</td>
                                  <td className={`py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.use}</td>
                                  <td className={`py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}><code className="text-xs">{row.code}</code></td>
                                  <td className={`py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.importance}</td>
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      </div>

                      {/* æ ‡å‡†åŒ–ä¸å½’ä¸€åŒ– */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-orange-900/20 border border-orange-700' : 'bg-orange-50 border border-orange-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-orange-300' : 'text-orange-700'}`}>ğŸ“ æ ‡å‡†åŒ– vs å½’ä¸€åŒ– â­â­â­â­â­</h4>
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <p className={`font-bold mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>StandardScalerï¼ˆæ ‡å‡†åŒ–ï¼‰</p>
                            <p className={`text-xs mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>å…¬å¼ï¼šz = (x - Î¼) / Ïƒï¼Œè½¬ä¸ºå‡å€¼0æ–¹å·®1</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)`}
                            </pre>
                            <p className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>é€‚ç”¨ï¼šçº¿æ€§å›å½’ã€é€»è¾‘å›å½’ã€SVM</p>
                          </div>
                          <div>
                            <p className={`font-bold mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>MinMaxScalerï¼ˆå½’ä¸€åŒ–ï¼‰</p>
                            <p className={`text-xs mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>å…¬å¼ï¼šx' = (x - min) / (max - min)ï¼Œè½¬ä¸º[0,1]</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.preprocessing import MinMaxScaler
scaler = MinMaxScaler()
X_scaled = scaler.fit_transform(X)`}
                            </pre>
                            <p className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>é€‚ç”¨ï¼šç¥ç»ç½‘ç»œã€KNNã€å›¾åƒå¤„ç†</p>
                          </div>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-orange-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-orange-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 03: ç‰¹å¾å·¥ç¨‹ */}
              <section id="feature-engineering">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-orange-500 via-amber-500 to-yellow-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">âš™ï¸ 03. ç‰¹å¾å·¥ç¨‹</h2>
                    </div>
                    <p className="text-orange-50 ml-7">ç‰¹å¾å†³å®šæ¨¡å‹ä¸Šé™ï¼Œç®—æ³•åªæ˜¯é€¼è¿‘ä¸Šé™</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* ç‰¹å¾é€‰æ‹© */}
                      <div>
                        <h3 className={`text-lg font-bold mb-4 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ¯ ç‰¹å¾é€‰æ‹©ï¼ˆé™ç»´å‡å™ªï¼‰â­â­â­â­â­
                        </h3>
                        <div className="grid grid-cols-3 gap-4">
                          {[
                            { method: 'æ–¹å·®è¿‡æ»¤', desc: 'åˆ é™¤æ–¹å·®å°çš„ç‰¹å¾', code: 'VarianceThreshold()', use: 'å»é™¤å¸¸æ•°ç‰¹å¾' },
                            { method: 'ç›¸å…³æ€§åˆ†æ', desc: 'åˆ é™¤é«˜åº¦ç›¸å…³ç‰¹å¾', code: 'df.corr()', use: 'é¿å…å¤šé‡å…±çº¿æ€§' },
                            { method: 'RFEé€’å½’æ¶ˆé™¤', desc: 'é€æ­¥åˆ é™¤ä¸é‡è¦ç‰¹å¾', code: 'RFE(estimator)', use: 'åŸºäºæ¨¡å‹é‡è¦æ€§' }
                          ].map((item, idx) => (
                            <div key={idx} className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-orange-900/20 border border-orange-700' : 'bg-orange-50 border-orange-200'}`}>
                              <p className={`font-bold text-sm mb-1 ${theme === 'dark' ? 'text-orange-400' : 'text-orange-600'}`}>{item.method}</p>
                              <p className={`text-xs mb-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{item.desc}</p>
                              <code className={`text-xs block mb-1 ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{item.code}</code>
                              <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>{item.use}</p>
                            </div>
                          ))}
                        </div>
                      </div>

                      {/* ç‰¹å¾æ„é€  */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-orange-400' : 'text-orange-600'}`}>ğŸ”§ ç‰¹å¾æ„é€ å®æˆ˜æŠ€å·§ â­â­â­â­â­</h4>
                        <div className="space-y-3">
                          <div>
                            <p className={`font-semibold text-sm mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>1ï¸âƒ£ æ—¶é—´ç‰¹å¾æ‹†è§£</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`df['year'] = df['date'].dt.year
df['month'] = df['date'].dt.month
df['dayofweek'] = df['date'].dt.dayofweek
df['hour'] = df['date'].dt.hour
df['is_weekend'] = df['dayofweek'].isin([5, 6]).astype(int)
df['is_holiday'] = df['date'].isin(holidays).astype(int)`}
                            </pre>
                          </div>
                          <div>
                            <p className={`font-semibold text-sm mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>2ï¸âƒ£ æ•°å€¼ç‰¹å¾ç»„åˆ</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`df['BMI'] = df['weight'] / (df['height'] / 100) ** 2
df['price_per_sqm'] = df['price'] / df['area']
df['total_amount'] = df['quantity'] * df['unit_price']`}
                            </pre>
                          </div>
                          <div>
                            <p className={`font-semibold text-sm mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>3ï¸âƒ£ ç»Ÿè®¡ç‰¹å¾èšåˆ</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`# ç”¨æˆ·å†å²è¡Œä¸ºèšåˆ
user_stats = df.groupby('user_id').agg({
    'order_amount': ['mean', 'sum', 'count', 'max', 'std'],
    'days_since_last': ['min', 'mean']
})`}
                            </pre>
                          </div>
                        </div>
                      </div>

                      {/* ç‰¹å¾é‡è¦æ€§ */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“Š ç‰¹å¾é‡è¦æ€§è¯„ä¼° â­â­â­â­
                        </h3>
                        <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.ensemble import RandomForestClassifier
import matplotlib.pyplot as plt

# è®­ç»ƒéšæœºæ£®æ—è·å–ç‰¹å¾é‡è¦æ€§
rf = RandomForestClassifier(n_estimators=100, random_state=42)
rf.fit(X_train, y_train)

# å¯è§†åŒ–ç‰¹å¾é‡è¦æ€§
feature_importance = pd.DataFrame({
    'feature': X.columns,
    'importance': rf.feature_importances_
}).sort_values('importance', ascending=False)

plt.barh(feature_importance['feature'][:10], feature_importance['importance'][:10])
plt.xlabel('Importance')
plt.title('Top 10 Feature Importance')
plt.show()`}
                          </pre>
                          
                          {/* ç‰¹å¾é‡è¦æ€§å¯è§†åŒ–å›¾è¡¨ */}
                          <div className="mt-4">
                            <FeatureImportanceChart theme={theme} />
                          </div>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ ·æœ¬ä¸å‡è¡¡å¤„ç†æ¨¡å— */}
              <ImbalancedDataModule theme={theme} />

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-purple-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-purple-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 06: åˆ†ç±»ç®—æ³• */}
              <section id="classification">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ² 04. åˆ†ç±»ç®—æ³•</h2>
                    </div>
                    <p className="text-purple-50 ml-7">ä»ç”¨æˆ·æµå¤±åˆ°é£é™©è¯†åˆ«ï¼ŒæŒæ¡5å¤§æ ¸å¿ƒç®—æ³•</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* ç®—æ³•å¯¹æ¯” */}
                      <div>
                        <h3 className={`text-lg font-bold mb-4 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ¯ 5å¤§åˆ†ç±»ç®—æ³•å¯¹æ¯”
                        </h3>
                        <div className="overflow-x-auto">
                          <table className="w-full text-sm">
                            <thead>
                              <tr className={`border-b-2 ${theme === 'dark' ? 'border-gray-600' : 'border-gray-300'}`}>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ç®—æ³•</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ä¼˜ç‚¹</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ç¼ºç‚¹</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>åº”ç”¨åœºæ™¯</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>é‡è¦æ€§</th>
                              </tr>
                            </thead>
                            <tbody>
                              {[
                                { algo: 'é€»è¾‘å›å½’', pros: 'ç®€å•å¿«é€Ÿã€å¯è§£é‡Šå¼º', cons: 'çº¿æ€§åˆ†ç±»', use: 'ç”¨æˆ·æµå¤±ã€ä¿¡ç”¨è¯„åˆ†', star: 'â­â­â­â­â­' },
                                { algo: 'å†³ç­–æ ‘', pros: 'å¯è§£é‡Šã€å¤„ç†éçº¿æ€§', cons: 'æ˜“è¿‡æ‹Ÿåˆ', use: 'è§„åˆ™æå–ã€é£é™©è¯„ä¼°', star: 'â­â­â­â­' },
                                { algo: 'éšæœºæ£®æ—', pros: 'å‡†ç¡®ç‡é«˜ã€é²æ£’æ€§å¼º', cons: 'è®­ç»ƒæ…¢ã€é»‘ç›’', use: 'ç‰¹å¾é‡è¦æ€§ã€é€šç”¨åˆ†ç±»', star: 'â­â­â­â­â­' },
                                { algo: 'XGBoost', pros: 'æ€§èƒ½æœ€å¼ºã€ç«èµ›é¦–é€‰', cons: 'è°ƒå‚å¤æ‚', use: 'Kaggleç«èµ›ã€ç²¾å‡†é¢„æµ‹', star: 'â­â­â­â­â­' },
                                { algo: 'SVM', pros: 'é«˜ç»´æ•°æ®ã€æ ¸æŠ€å·§', cons: 'å¤§æ•°æ®æ…¢', use: 'æ–‡æœ¬åˆ†ç±»ã€å°æ ·æœ¬', star: 'â­â­â­' }
                              ].map((row, idx) => (
                                <tr key={idx} className={`border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
                                  <td className={`py-2 px-3 font-semibold ${theme === 'dark' ? 'text-purple-400' : 'text-purple-600'}`}>{row.algo}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{row.pros}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-red-400' : 'text-red-600'}`}>{row.cons}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.use}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.star}</td>
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      </div>

                      {/* é€»è¾‘å›å½’ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-purple-400' : 'text-purple-600'}`}>ğŸ”¥ é€»è¾‘å›å½’ - æœ€å¸¸ç”¨çš„åˆ†ç±»ç®—æ³• â­â­â­â­â­</h4>
                        <pre className={`text-xs overflow-x-auto p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'} border ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
{`from sklearn.linear_model import LogisticRegression
from sklearn.model_selection import train_test_split
from sklearn.metrics import classification_report, confusion_matrix

# 1. æ•°æ®å‡†å¤‡
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# 2. è®­ç»ƒæ¨¡å‹
lr = LogisticRegression(max_iter=1000, random_state=42)
lr.fit(X_train, y_train)

# 3. é¢„æµ‹
y_pred = lr.predict(X_test)
y_proba = lr.predict_proba(X_test)[:, 1]  # è·å–æ¦‚ç‡

# 4. è¯„ä¼°
print("å‡†ç¡®ç‡:", lr.score(X_test, y_test))
print(classification_report(y_test, y_pred))

# 5. ç‰¹å¾ç³»æ•°ï¼ˆå¯è§£é‡Šæ€§ï¼‰
coef_df = pd.DataFrame({
    'feature': X.columns,
    'coefficient': lr.coef_[0]
}).sort_values('coefficient', ascending=False)
print("\\nç‰¹å¾é‡è¦æ€§:\\n", coef_df)`}
                        </pre>
                      </div>

                      {/* éšæœºæ£®æ— */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>ğŸŒ² éšæœºæ£®æ— - é²æ£’æ€§æœ€å¼º â­â­â­â­â­</h4>
                        <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.ensemble import RandomForestClassifier

# è®­ç»ƒéšæœºæ£®æ—
rf = RandomForestClassifier(
    n_estimators=100,      # æ ‘çš„æ•°é‡
    max_depth=10,          # æ ‘çš„æœ€å¤§æ·±åº¦
    min_samples_split=20,  # åˆ†è£‚æœ€å°æ ·æœ¬æ•°
    random_state=42
)
rf.fit(X_train, y_train)

# é¢„æµ‹
y_pred = rf.predict(X_test)
print("å‡†ç¡®ç‡:", rf.score(X_test, y_test))

# ç‰¹å¾é‡è¦æ€§
feature_importance = pd.DataFrame({
    'feature': X.columns,
    'importance': rf.feature_importances_
}).sort_values('importance', ascending=False)
print("\\nTop 5 ç‰¹å¾:\\n", feature_importance.head())`}
                        </pre>
                      </div>

                      {/* XGBoost */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-green-900/20 border border-green-700' : 'bg-green-50 border border-green-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-green-300' : 'text-green-700'}`}>ğŸš€ XGBoost - ç«èµ›ç‹è€… â­â­â­â­â­</h4>
                        <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`import xgboost as xgb

# è®­ç»ƒXGBoost
xgb_model = xgb.XGBClassifier(
    n_estimators=100,
    learning_rate=0.1,
    max_depth=5,
    subsample=0.8,
    colsample_bytree=0.8,
    random_state=42
)
xgb_model.fit(X_train, y_train)

# é¢„æµ‹
y_pred = xgb_model.predict(X_test)
print("å‡†ç¡®ç‡:", xgb_model.score(X_test, y_test))

# ç‰¹å¾é‡è¦æ€§å¯è§†åŒ–
xgb.plot_importance(xgb_model, max_num_features=10)
plt.title('XGBoost Feature Importance')
plt.show()`}
                        </pre>
                      </div>

                      {/* å®æˆ˜æ¡ˆä¾‹ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-orange-900/20 border border-orange-700' : 'bg-orange-50 border border-orange-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-orange-300' : 'text-orange-700'}`}>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹ï¼šç”¨æˆ·æµå¤±é¢„æµ‹</h4>
                        <div className={`text-sm space-y-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          <p><strong>ä¸šåŠ¡åœºæ™¯ï¼š</strong>ç”µå•†å¹³å°é¢„æµ‹å“ªäº›ç”¨æˆ·ä¼šæµå¤±</p>
                          <p><strong>ç‰¹å¾ï¼š</strong>æœ€è¿‘è´­ä¹°å¤©æ•°ã€è´­ä¹°é¢‘ç‡ã€å¹³å‡è®¢å•é‡‘é¢ã€ä¼šå‘˜ç­‰çº§ã€æŠ•è¯‰æ¬¡æ•°</p>
                          <p><strong>æ ‡ç­¾ï¼š</strong>æ˜¯å¦æµå¤±ï¼ˆ30å¤©æœªè´­ä¹°=1ï¼Œå¦åˆ™=0ï¼‰</p>
                          <p><strong>æ¨¡å‹é€‰æ‹©ï¼š</strong>é€»è¾‘å›å½’ï¼ˆå¯è§£é‡Šï¼‰ + XGBoostï¼ˆé«˜ç²¾åº¦ï¼‰</p>
                          <p><strong>ä¸šåŠ¡ä»·å€¼ï¼š</strong>æå‰è¯†åˆ«æµå¤±ç”¨æˆ·ï¼Œå‘æ”¾ä¼˜æƒ åˆ¸æŒ½å›ï¼ŒROIæå‡300%</p>
                        </div>
                      </div>

                      {/* æ¨¡å‹è¯„ä¼°å¯è§†åŒ– */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“Š æ¨¡å‹è¯„ä¼°å¯è§†åŒ– â­â­â­â­â­
                        </h3>
                        <div className="grid grid-cols-2 gap-4">
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                            <ConfusionMatrixChart theme={theme} />
                            <p className={`text-xs mt-2 text-center ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              Precision = 850/(850+50) = 94.4% | Recall = 70/(70+30) = 70%
                            </p>
                          </div>
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                            <ROCCurveChart theme={theme} />
                            <p className={`text-xs mt-2 text-center ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                              AUCè¶Šæ¥è¿‘1ï¼Œæ¨¡å‹åŒºåˆ†èƒ½åŠ›è¶Šå¼º
                            </p>
                          </div>
                        </div>
                        
                        {/* æ··æ·†çŸ©é˜µä»£ç  */}
                        <div className={`mt-4 p-4 rounded-lg ${theme === 'dark' ? 'bg-indigo-900/20 border border-indigo-700' : 'bg-indigo-50 border border-indigo-200'}`}>
                          <p className={`text-sm font-bold mb-2 ${theme === 'dark' ? 'text-indigo-300' : 'text-indigo-700'}`}>å®Œæ•´è¯„ä¼°ä»£ç </p>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.metrics import confusion_matrix, classification_report, roc_auc_score, roc_curve
import matplotlib.pyplot as plt

# é¢„æµ‹
y_pred = model.predict(X_test)
y_proba = model.predict_proba(X_test)[:, 1]

# æ··æ·†çŸ©é˜µ
cm = confusion_matrix(y_test, y_pred)
print("æ··æ·†çŸ©é˜µ:\\n", cm)

# åˆ†ç±»æŠ¥å‘Š
print("\\nåˆ†ç±»æŠ¥å‘Š:\\n", classification_report(y_test, y_pred))

# ROC-AUC
auc = roc_auc_score(y_test, y_proba)
print(f"\\nAUC Score: {auc:.4f}")

# ç»˜åˆ¶ROCæ›²çº¿
fpr, tpr, thresholds = roc_curve(y_test, y_proba)
plt.plot(fpr, tpr, label=f'AUC = {auc:.2f}')
plt.plot([0, 1], [0, 1], 'k--')
plt.xlabel('False Positive Rate')
plt.ylabel('True Positive Rate')
plt.title('ROC Curve')
plt.legend()
plt.show()`}
                          </pre>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-red-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-red-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 05: å›å½’ç®—æ³• */}
              <section id="regression">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-red-500 via-orange-500 to-pink-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ“ˆ 05. å›å½’ç®—æ³•</h2>
                    </div>
                    <p className="text-red-50 ml-7">ä»é”€å”®é¢„æµ‹åˆ°ä»·æ ¼ä¼°ç®—ï¼Œé¢„æµ‹è¿ç»­æ•°å€¼çš„åˆ©å™¨</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* çº¿æ€§å›å½’ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-red-400' : 'text-red-600'}`}>ğŸ“ çº¿æ€§å›å½’ - æœ€åŸºç¡€æœ€å¸¸ç”¨ â­â­â­â­â­</h4>
                        <pre className={`text-xs overflow-x-auto p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'} border ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
{`from sklearn.linear_model import LinearRegression
from sklearn.metrics import mean_squared_error, r2_score
import numpy as np

# è®­ç»ƒçº¿æ€§å›å½’
lr = LinearRegression()
lr.fit(X_train, y_train)

# é¢„æµ‹
y_pred = lr.predict(X_test)

# è¯„ä¼°
print("RÂ² å¾—åˆ†:", r2_score(y_test, y_pred))
print("MSE:", mean_squared_error(y_test, y_pred))
print("RMSE:", np.sqrt(mean_squared_error(y_test, y_pred)))

# æŸ¥çœ‹ç³»æ•°
coef_df = pd.DataFrame({
    'feature': X.columns,
    'coefficient': lr.coef_
}).sort_values('coefficient', key=abs, ascending=False)
print("\\nç‰¹å¾ç³»æ•°:\\n", coef_df)`}
                        </pre>
                      </div>

                      {/* å²­å›å½’å’ŒLasso */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ¯ æ­£åˆ™åŒ–å›å½’ï¼šå²­å›å½’ vs Lasso â­â­â­â­
                        </h3>
                        <div className="grid grid-cols-2 gap-4">
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                            <p className={`font-bold mb-2 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>å²­å›å½’ï¼ˆRidgeï¼‰- L2æ­£åˆ™åŒ–</p>
                            <p className={`text-xs mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>æƒ©ç½šç³»æ•°å¹³æ–¹å’Œï¼Œç³»æ•°è¶‹è¿‘0ä½†ä¸ä¸º0</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.linear_model import Ridge
ridge = Ridge(alpha=1.0)
ridge.fit(X_train, y_train)
print("RÂ²:", ridge.score(X_test, y_test))`}
                            </pre>
                            <p className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>âœ“ é˜²æ­¢è¿‡æ‹Ÿåˆ | âœ“ ç‰¹å¾å¤šé‡å…±çº¿æ€§</p>
                          </div>
                          <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                            <p className={`font-bold mb-2 ${theme === 'dark' ? 'text-purple-300' : 'text-purple-700'}`}>Lasso - L1æ­£åˆ™åŒ–</p>
                            <p className={`text-xs mb-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>æƒ©ç½šç³»æ•°ç»å¯¹å€¼ï¼Œå¯å°†ç³»æ•°å‹ç¼©ä¸º0</p>
                            <pre className={`text-xs p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.linear_model import Lasso
lasso = Lasso(alpha=0.1)
lasso.fit(X_train, y_train)
print("RÂ²:", lasso.score(X_test, y_test))`}
                            </pre>
                            <p className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>âœ“ ç‰¹å¾é€‰æ‹© | âœ“ ç¨€ç–æ¨¡å‹</p>
                          </div>
                        </div>
                      </div>

                      {/* å®æˆ˜æ¡ˆä¾‹ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-orange-900/20 border border-orange-700' : 'bg-orange-50 border border-orange-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-orange-300' : 'text-orange-700'}`}>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹ï¼šé”€å”®é¢é¢„æµ‹</h4>
                        <div className={`text-sm space-y-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          <p><strong>ä¸šåŠ¡åœºæ™¯ï¼š</strong>æ ¹æ®å†å²æ•°æ®é¢„æµ‹æœªæ¥3ä¸ªæœˆé”€å”®é¢</p>
                          <p><strong>ç‰¹å¾ï¼š</strong>ä¿ƒé”€åŠ›åº¦ã€å­£èŠ‚æ€§ã€å†å²é”€é‡ã€ç«å“ä»·æ ¼ã€å¹¿å‘ŠæŠ•å…¥</p>
                          <p><strong>ç›®æ ‡ï¼š</strong>é”€å”®é¢ï¼ˆè¿ç»­å€¼ï¼‰</p>
                          <p><strong>æ¨¡å‹é€‰æ‹©ï¼š</strong>çº¿æ€§å›å½’ï¼ˆåŸºçº¿ï¼‰ + XGBoostï¼ˆæœ€ç»ˆï¼‰</p>
                          <p><strong>è¯„ä¼°æŒ‡æ ‡ï¼š</strong>RMSEã€MAEã€RÂ²</p>
                          <p><strong>ä¸šåŠ¡ä»·å€¼ï¼š</strong>å‡†ç¡®é¢„æµ‹å¸®åŠ©å¤‡è´§ï¼Œå‡å°‘åº“å­˜ç§¯å‹30%</p>
                        </div>
                      </div>

                      {/* å›å½’æ¨¡å‹å¯è§†åŒ– */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“Š å›å½’æ¨¡å‹æ•ˆæœå¯è§†åŒ– â­â­â­â­â­
                        </h3>
                        <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                          <RegressionScatterChart theme={theme} />
                          <p className={`text-xs mt-2 text-center ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                            ç‚¹è¶Šæ¥è¿‘å¯¹è§’çº¿ï¼Œé¢„æµ‹è¶Šå‡†ç¡®ã€‚RÂ²=0.85è¡¨ç¤ºæ¨¡å‹è§£é‡Šäº†85%çš„æ–¹å·®
                          </p>
                        </div>

                        {/* å®Œæ•´å›å½’ä»£ç ç¤ºä¾‹ */}
                        <div className={`mt-4 p-4 rounded-lg ${theme === 'dark' ? 'bg-green-900/20 border border-green-700' : 'bg-green-50 border border-green-200'}`}>
                          <p className={`text-sm font-bold mb-2 ${theme === 'dark' ? 'text-green-300' : 'text-green-700'}`}>å®Œæ•´å›å½’å»ºæ¨¡æµç¨‹</p>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.linear_model import LinearRegression
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error
import numpy as np
import matplotlib.pyplot as plt

# è®­ç»ƒæ¨¡å‹
lr = LinearRegression()
lr.fit(X_train, y_train)

# é¢„æµ‹
y_pred = lr.predict(X_test)

# è¯„ä¼°
mae = mean_absolute_error(y_test, y_pred)
mse = mean_squared_error(y_test, y_pred)
rmse = np.sqrt(mse)
r2 = r2_score(y_test, y_pred)

print(f"MAE: {mae:.2f}")
print(f"RMSE: {rmse:.2f}")
print(f"RÂ²: {r2:.4f}")

# é¢„æµ‹ vs å®é™…æ•£ç‚¹å›¾
plt.figure(figsize=(10, 6))
plt.scatter(y_test, y_pred, alpha=0.5)
plt.plot([y_test.min(), y_test.max()], [y_test.min(), y_test.max()], 'r--', lw=2)
plt.xlabel('Actual Values')
plt.ylabel('Predicted Values')
plt.title(f'Prediction vs Actual (RÂ² = {r2:.2f})')
plt.show()

# æ®‹å·®å›¾
residuals = y_test - y_pred
plt.figure(figsize=(10, 6))
plt.scatter(y_pred, residuals, alpha=0.5)
plt.axhline(y=0, color='r', linestyle='--')
plt.xlabel('Predicted Values')
plt.ylabel('Residuals')
plt.title('Residual Plot')
plt.show()`}
                          </pre>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-cyan-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-cyan-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 06: èšç±»ç®—æ³• */}
              <section id="clustering">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-cyan-500 via-blue-500 to-indigo-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ”® 06. èšç±»ç®—æ³•</h2>
                    </div>
                    <p className="text-cyan-50 ml-7">æ— ç›‘ç£å­¦ä¹ ï¼Œè‡ªåŠ¨å‘ç°æ•°æ®ä¸­çš„éšè—æ¨¡å¼</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* K-means */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-cyan-400' : 'text-cyan-600'}`}>ğŸ¯ K-means - æœ€ç»å…¸çš„èšç±»ç®—æ³• â­â­â­â­â­</h4>
                        <pre className={`text-xs overflow-x-auto p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'} border ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
{`from sklearn.cluster import KMeans
import matplotlib.pyplot as plt

# è‚˜éƒ¨æ³•åˆ™ç¡®å®šæœ€ä¼˜Kå€¼
inertias = []
for k in range(1, 11):
    kmeans = KMeans(n_clusters=k, random_state=42)
    kmeans.fit(X)
    inertias.append(kmeans.inertia_)

plt.plot(range(1, 11), inertias, marker='o')
plt.xlabel('Number of clusters')
plt.ylabel('Inertia')
plt.title('Elbow Method')
plt.show()

# è®­ç»ƒK-means
kmeans = KMeans(n_clusters=3, random_state=42)
clusters = kmeans.fit_predict(X)

# æ·»åŠ èšç±»æ ‡ç­¾
df['cluster'] = clusters

# åˆ†ææ¯ä¸ªèšç±»
for i in range(3):
    print(f"\\nCluster {i}:")
    print(df[df['cluster'] == i].describe())`}
                        </pre>
                      </div>

                      {/* ç®—æ³•å¯¹æ¯” */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“Š 3å¤§èšç±»ç®—æ³•å¯¹æ¯”
                        </h3>
                        <div className="overflow-x-auto">
                          <table className="w-full text-sm">
                            <thead>
                              <tr className={`border-b-2 ${theme === 'dark' ? 'border-gray-600' : 'border-gray-300'}`}>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ç®—æ³•</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>åŸç†</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ä¼˜ç‚¹</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ç¼ºç‚¹</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>é‡è¦æ€§</th>
                              </tr>
                            </thead>
                            <tbody>
                              {[
                                { algo: 'K-means', principle: 'è·ç¦»æœ€è¿‘ä¸­å¿ƒç‚¹', pros: 'ç®€å•å¿«é€Ÿ', cons: 'éœ€æŒ‡å®šKå€¼', star: 'â­â­â­â­â­' },
                                { algo: 'DBSCAN', principle: 'å¯†åº¦èšç±»', pros: 'è‡ªåŠ¨å‘ç°ç°‡æ•°', cons: 'å‚æ•°æ•æ„Ÿ', star: 'â­â­â­â­' },
                                { algo: 'å±‚æ¬¡èšç±»', principle: 'æ ‘çŠ¶ç»“æ„', pros: 'å¯è§†åŒ–æ ‘çŠ¶å›¾', cons: 'è®¡ç®—å¤æ‚', star: 'â­â­â­' }
                              ].map((row, idx) => (
                                <tr key={idx} className={`border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
                                  <td className={`py-2 px-3 font-semibold ${theme === 'dark' ? 'text-cyan-400' : 'text-cyan-600'}`}>{row.algo}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.principle}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{row.pros}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-red-400' : 'text-red-600'}`}>{row.cons}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.star}</td>
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      </div>

                      {/* RFMå®¢æˆ·åˆ†ç¾¤å®æˆ˜ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-purple-300' : 'text-purple-700'}`}>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹ï¼šRFMå®¢æˆ·åˆ†ç¾¤</h4>
                        <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`# è®¡ç®—RFMç‰¹å¾
from datetime import datetime
reference_date = df['order_date'].max()

rfm = df.groupby('user_id').agg({
    'order_date': lambda x: (reference_date - x.max()).days,  # R
    'order_id': 'count',                                       # F
    'amount': 'sum'                                            # M
}).rename(columns={
    'order_date': 'recency',
    'order_id': 'frequency',
    'amount': 'monetary'
})

# æ ‡å‡†åŒ–
from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
rfm_scaled = scaler.fit_transform(rfm)

# K-meansèšç±»
kmeans = KMeans(n_clusters=4, random_state=42)
rfm['cluster'] = kmeans.fit_predict(rfm_scaled)

# åˆ†æå®¢æˆ·ç¾¤
print(rfm.groupby('cluster').mean())
# Cluster 0: é«˜ä»·å€¼å®¢æˆ·ï¼ˆä½Rã€é«˜Fã€é«˜Mï¼‰
# Cluster 1: æµå¤±å®¢æˆ·ï¼ˆé«˜Rã€ä½Fã€ä½Mï¼‰
# Cluster 2: æ½œåŠ›å®¢æˆ·ï¼ˆä½Rã€ä¸­Fã€ä¸­Mï¼‰
# Cluster 3: æ™®é€šå®¢æˆ·ï¼ˆä¸­Rã€ä¸­Fã€ä¸­Mï¼‰`}
                        </pre>
                      </div>

                      {/* èšç±»å¯è§†åŒ– */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“Š èšç±»ç»“æœå¯è§†åŒ– â­â­â­â­â­
                        </h3>
                        <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                          <ClusteringVisualization theme={theme} />
                          <p className={`text-xs mt-2 text-center ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                            ä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒèšç±»ï¼Œâ­è¡¨ç¤ºèšç±»ä¸­å¿ƒ
                          </p>
                        </div>

                        {/* èšç±»è¯„ä¼°æŒ‡æ ‡ */}
                        <div className={`mt-4 p-4 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                          <p className={`text-sm font-bold mb-2 ${theme === 'dark' ? 'text-purple-300' : 'text-purple-700'}`}>èšç±»æ•ˆæœè¯„ä¼°</p>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.metrics import silhouette_score, davies_bouldin_score, calinski_harabasz_score

# è½®å»“ç³»æ•°ï¼ˆ-1åˆ°1ï¼Œè¶Šæ¥è¿‘1è¶Šå¥½ï¼‰
silhouette = silhouette_score(X, labels)
print(f"Silhouette Score: {silhouette:.3f}")

# Davies-BouldinæŒ‡æ•°ï¼ˆè¶Šå°è¶Šå¥½ï¼‰
db_index = davies_bouldin_score(X, labels)
print(f"Davies-Bouldin Index: {db_index:.3f}")

# Calinski-HarabaszæŒ‡æ•°ï¼ˆè¶Šå¤§è¶Šå¥½ï¼‰
ch_score = calinski_harabasz_score(X, labels)
print(f"Calinski-Harabasz Score: {ch_score:.2f}")

# å¯è§†åŒ–èšç±»ç»“æœ
import matplotlib.pyplot as plt
from sklearn.decomposition import PCA

# PCAé™ç»´åˆ°2D
pca = PCA(n_components=2)
X_pca = pca.fit_transform(X)

plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_pca[:, 0], X_pca[:, 1], c=labels, cmap='viridis', alpha=0.6)
plt.colorbar(scatter, label='Cluster')
plt.xlabel('PCA Component 1')
plt.ylabel('PCA Component 2')
plt.title('K-means Clustering Results (PCA)')
plt.show()`}
                          </pre>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ—¶é—´åºåˆ—é¢„æµ‹æ¨¡å— */}
              <TimeSeriesModule theme={theme} />

              {/* å¼‚å¸¸æ£€æµ‹æ¨¡å— */}
              <AnomalyDetectionModule theme={theme} />

              {/* é™ç»´ä¸å¯è§†åŒ–æ¨¡å— */}
              <DimensionalityReductionModule theme={theme} />

              {/* é›†æˆå­¦ä¹ æ·±åº¦è§£ææ¨¡å— */}
              <EnsembleLearningModule theme={theme} />

              {/* æ¨¡å‹è§£é‡Šæ€§æ¨¡å— */}
              <ModelInterpretabilityModule theme={theme} />

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-green-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-green-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 14: æ¨¡å‹è¯„ä¼°ä¸è°ƒä¼˜ */}
              <section id="model-evaluation">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ“Š 07. æ¨¡å‹è¯„ä¼°ä¸è°ƒä¼˜</h2>
                    </div>
                    <p className="text-green-50 ml-7">ä»åŸºç¡€è¯„ä¼°åˆ°é«˜çº§è°ƒä¼˜ï¼Œæ‰“é€ é«˜æ€§èƒ½æ¨¡å‹</p>
                  </div>
                </div>

                <div className="space-y-6">
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-6">
                      {/* è¯„ä¼°æŒ‡æ ‡ */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ¯ åˆ†ç±»æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ â­â­â­â­â­
                        </h3>
                        <div className="overflow-x-auto">
                          <table className="w-full text-sm">
                            <thead>
                              <tr className={`border-b-2 ${theme === 'dark' ? 'border-gray-600' : 'border-gray-300'}`}>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>æŒ‡æ ‡</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>å…¬å¼</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>é€‚ç”¨åœºæ™¯</th>
                                <th className={`text-left py-2 px-3 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>ä»£ç </th>
                              </tr>
                            </thead>
                            <tbody>
                              {[
                                { metric: 'Accuracy', formula: 'æ­£ç¡®é¢„æµ‹æ•° / æ€»æ•°', use: 'æ ·æœ¬å‡è¡¡', code: 'accuracy_score(y_true, y_pred)' },
                                { metric: 'Precision', formula: 'TP / (TP + FP)', use: 'å‡å°‘è¯¯æŠ¥', code: 'precision_score(y_true, y_pred)' },
                                { metric: 'Recall', formula: 'TP / (TP + FN)', use: 'å‡å°‘æ¼æŠ¥', code: 'recall_score(y_true, y_pred)' },
                                { metric: 'F1-Score', formula: '2 * P * R / (P + R)', use: 'å¹³è¡¡På’ŒR', code: 'f1_score(y_true, y_pred)' },
                                { metric: 'AUC-ROC', formula: 'ROCæ›²çº¿ä¸‹é¢ç§¯', use: 'æ ·æœ¬ä¸å‡è¡¡', code: 'roc_auc_score(y_true, y_proba)' }
                              ].map((row, idx) => (
                                <tr key={idx} className={`border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
                                  <td className={`py-2 px-3 font-semibold ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{row.metric}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>{row.formula}</td>
                                  <td className={`py-2 px-3 text-xs ${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'}`}>{row.use}</td>
                                  <td className={`py-2 px-3 text-xs font-mono ${theme === 'dark' ? 'text-orange-400' : 'text-orange-600'}`}>{row.code}</td>
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      </div>

                      {/* äº¤å‰éªŒè¯ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>ğŸ”„ äº¤å‰éªŒè¯ - æ›´å¯é çš„è¯„ä¼° â­â­â­â­â­</h4>
                        <pre className={`text-xs overflow-x-auto p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'} border ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
{`from sklearn.model_selection import cross_val_score, KFold

# KæŠ˜äº¤å‰éªŒè¯
kfold = KFold(n_splits=5, shuffle=True, random_state=42)
scores = cross_val_score(model, X, y, cv=kfold, scoring='accuracy')

print(f"5æŠ˜äº¤å‰éªŒè¯å¾—åˆ†: {scores}")
print(f"å¹³å‡å‡†ç¡®ç‡: {scores.mean():.4f} (+/- {scores.std():.4f})")

# å¤šæŒ‡æ ‡è¯„ä¼°
from sklearn.model_selection import cross_validate
scoring = ['accuracy', 'precision', 'recall', 'f1', 'roc_auc']
results = cross_validate(model, X, y, cv=5, scoring=scoring)

for metric in scoring:
    print(f"{metric}: {results[f'test_{metric}'].mean():.4f}")`}
                        </pre>
                      </div>

                      {/* ç½‘æ ¼æœç´¢ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>ğŸ”§ ç½‘æ ¼æœç´¢ - è‡ªåŠ¨è°ƒå‚ â­â­â­â­â­</h4>
                        <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.model_selection import GridSearchCV
from sklearn.ensemble import RandomForestClassifier

# å®šä¹‰å‚æ•°ç½‘æ ¼
param_grid = {
    'n_estimators': [50, 100, 200],
    'max_depth': [5, 10, 15, None],
    'min_samples_split': [2, 5, 10],
    'min_samples_leaf': [1, 2, 4]
}

# ç½‘æ ¼æœç´¢
rf = RandomForestClassifier(random_state=42)
grid_search = GridSearchCV(
    rf, param_grid, cv=5, 
    scoring='f1', n_jobs=-1, verbose=1
)
grid_search.fit(X_train, y_train)

# æœ€ä½³å‚æ•°å’Œå¾—åˆ†
print("æœ€ä½³å‚æ•°:", grid_search.best_params_)
print("æœ€ä½³å¾—åˆ†:", grid_search.best_score_)
best_model = grid_search.best_estimator_`}
                        </pre>
                      </div>

                      {/* å›å½’è¯„ä¼°æŒ‡æ ‡ */}
                      <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                        <h4 className={`font-bold mb-3 ${theme === 'dark' ? 'text-purple-300' : 'text-purple-700'}`}>ğŸ“ˆ å›å½’æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ â­â­â­â­</h4>
                        <div className={`text-sm space-y-2 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          <p>â€¢ <strong>MAE (å¹³å‡ç»å¯¹è¯¯å·®)ï¼š</strong>é¢„æµ‹å€¼ä¸çœŸå®å€¼å·®çš„ç»å¯¹å€¼å¹³å‡ â†’ å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿ</p>
                          <p>â€¢ <strong>MSE (å‡æ–¹è¯¯å·®)ï¼š</strong>å·®å€¼çš„å¹³æ–¹å¹³å‡ â†’ æƒ©ç½šå¤§è¯¯å·®</p>
                          <p>â€¢ <strong>RMSE (å‡æ–¹æ ¹è¯¯å·®)ï¼š</strong>MSEçš„å¹³æ–¹æ ¹ â†’ ä¸åŸæ•°æ®åŒå•ä½</p>
                          <p>â€¢ <strong>RÂ² (å†³å®šç³»æ•°)ï¼š</strong>0-1ä¹‹é—´ï¼Œè¶Šæ¥è¿‘1è¶Šå¥½ â†’ è¡¡é‡æ‹Ÿåˆä¼˜åº¦</p>
                        </div>
                        <pre className={`text-xs mt-3 p-2 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.metrics import mean_absolute_error, mean_squared_error, r2_score
import numpy as np

mae = mean_absolute_error(y_test, y_pred)
mse = mean_squared_error(y_test, y_pred)
rmse = np.sqrt(mse)
r2 = r2_score(y_test, y_pred)
print(f"MAE: {mae:.2f}, RMSE: {rmse:.2f}, RÂ²: {r2:.4f}")`}
                        </pre>
                      </div>

                      {/* å­¦ä¹ æ›²çº¿å¯è§†åŒ– */}
                      <div>
                        <h3 className={`text-lg font-bold mb-3 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>
                          ğŸ“ˆ å­¦ä¹ æ›²çº¿åˆ†æ â­â­â­â­â­
                        </h3>
                        <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                          <LearningCurveChart theme={theme} />
                          <p className={`text-xs mt-2 text-center ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                            è®­ç»ƒé›†ä¸éªŒè¯é›†å¾—åˆ†è¶‹äºæ”¶æ•›ï¼Œè¯´æ˜æ¨¡å‹ä¸è¿‡æ‹Ÿåˆä¹Ÿä¸æ¬ æ‹Ÿåˆ
                          </p>
                        </div>

                        {/* å­¦ä¹ æ›²çº¿ä»£ç  */}
                        <div className={`mt-4 p-4 rounded-lg ${theme === 'dark' ? 'bg-orange-900/20 border border-orange-700' : 'bg-orange-50 border border-orange-200'}`}>
                          <p className={`text-sm font-bold mb-2 ${theme === 'dark' ? 'text-orange-300' : 'text-orange-700'}`}>å­¦ä¹ æ›²çº¿ç»˜åˆ¶</p>
                          <pre className={`text-xs p-3 rounded ${theme === 'dark' ? 'bg-black text-green-400' : 'bg-white text-gray-800'}`}>
{`from sklearn.model_selection import learning_curve
import numpy as np
import matplotlib.pyplot as plt

# è®¡ç®—å­¦ä¹ æ›²çº¿
train_sizes, train_scores, val_scores = learning_curve(
    model, X, y, 
    train_sizes=np.linspace(0.1, 1.0, 10),
    cv=5, 
    scoring='accuracy',
    n_jobs=-1
)

# è®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®
train_mean = np.mean(train_scores, axis=1)
train_std = np.std(train_scores, axis=1)
val_mean = np.mean(val_scores, axis=1)
val_std = np.std(val_scores, axis=1)

# ç»˜åˆ¶å­¦ä¹ æ›²çº¿
plt.figure(figsize=(10, 6))
plt.plot(train_sizes, train_mean, label='Training score', marker='o')
plt.plot(train_sizes, val_mean, label='Validation score', marker='s')
plt.fill_between(train_sizes, train_mean - train_std, train_mean + train_std, alpha=0.15)
plt.fill_between(train_sizes, val_mean - val_std, val_mean + val_std, alpha=0.15)
plt.xlabel('Training Set Size')
plt.ylabel('Accuracy Score')
plt.title('Learning Curve')
plt.legend(loc='lower right')
plt.grid(True, alpha=0.3)
plt.show()

# åˆ†æç»“è®º
if val_mean[-1] < 0.7:
    print("âš ï¸ æ¨¡å‹æ¬ æ‹Ÿåˆï¼Œå»ºè®®ï¼šå¢åŠ ç‰¹å¾å¤æ‚åº¦ã€å‡å°‘æ­£åˆ™åŒ–")
elif train_mean[-1] - val_mean[-1] > 0.1:
    print("âš ï¸ æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œå»ºè®®ï¼šå¢åŠ æ•°æ®é‡ã€å¢å¼ºæ­£åˆ™åŒ–ã€ç®€åŒ–æ¨¡å‹")
else:
    print("âœ“ æ¨¡å‹æ‹Ÿåˆè‰¯å¥½")`}
                          </pre>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* æ¨¡å‹éƒ¨ç½²ä¸ç›‘æ§æ¨¡å— */}
              <ModelDeploymentModule theme={theme} />

              {/* æ¨¡å—åˆ†éš”ç¬¦ */}
              <div className="relative flex items-center justify-center py-4">
                <div className={`absolute inset-0 flex items-center ${theme === 'dark' ? 'opacity-20' : 'opacity-30'}`}>
                  <div className="w-full h-px bg-gradient-to-r from-transparent via-rose-500 to-transparent"></div>
                </div>
                <div className="relative px-4 text-rose-500 font-bold">â—† â—† â—†</div>
              </div>

              {/* MODULE 16: å®æˆ˜æ¡ˆä¾‹åº“ */}
              <section id="case-studies">
                <div className="relative overflow-hidden rounded-xl p-6 mb-6 bg-gradient-to-r from-rose-500 via-pink-500 to-fuchsia-500 shadow-lg">
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                  <div className="relative">
                    <div className="flex items-center gap-3 mb-2">
                      <div className="w-1 h-8 bg-white rounded-full"></div>
                      <h2 className="text-2xl font-bold text-white">ğŸ’¼ 08. å®æˆ˜æ¡ˆä¾‹åº“</h2>
                    </div>
                    <p className="text-rose-50 ml-7">3å¤§å…¸å‹ä¸šåŠ¡åœºæ™¯ï¼Œå®Œæ•´å»ºæ¨¡æµç¨‹</p>
                  </div>
                </div>

                <div className="space-y-6">
                  {/* æ¡ˆä¾‹1ï¼šç”¨æˆ·æµå¤±é¢„æµ‹ */}
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-4">
                      <h3 className={`text-lg font-bold ${theme === 'dark' ? 'text-rose-400' : 'text-rose-600'}`}>
                        ğŸ“± æ¡ˆä¾‹1ï¼šç”µå•†ç”¨æˆ·æµå¤±é¢„æµ‹ â­â­â­â­â­
                      </h3>
                      
                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>ä¸šåŠ¡èƒŒæ™¯</p>
                        <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                          ç”µå•†å¹³å°æœˆæ´»1000ä¸‡ï¼Œä½†30å¤©æœªè´­ä¹°ç”¨æˆ·å 40%ï¼Œéœ€é¢„æµ‹æµå¤±ç”¨æˆ·å¹¶ç²¾å‡†æŒ½å›
                        </p>
                      </div>

                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-blue-900/20 border border-blue-700' : 'bg-blue-50 border border-blue-200'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>å»ºæ¨¡æ­¥éª¤</p>
                        <ol className={`text-xs space-y-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          <li>1. <strong>ç‰¹å¾å·¥ç¨‹ï¼š</strong>RFMï¼ˆæœ€è¿‘è´­ä¹°å¤©æ•°ã€è´­ä¹°é¢‘ç‡ã€ç´¯è®¡é‡‘é¢ï¼‰+ è¡Œä¸ºç‰¹å¾ï¼ˆæµè§ˆã€æ”¶è—ã€åŠ è´­ï¼‰</li>
                          <li>2. <strong>æ ‡ç­¾å®šä¹‰ï¼š</strong>30å¤©æœªè´­ä¹°=1ï¼ˆæµå¤±ï¼‰ï¼Œå¦åˆ™=0ï¼ˆæ´»è·ƒï¼‰</li>
                          <li>3. <strong>æ ·æœ¬ä¸å‡è¡¡å¤„ç†ï¼š</strong>SMOTEè¿‡é‡‡æ · æˆ– è°ƒæ•´class_weight</li>
                          <li>4. <strong>æ¨¡å‹é€‰æ‹©ï¼š</strong>é€»è¾‘å›å½’ï¼ˆå¯è§£é‡Šï¼‰ + XGBoostï¼ˆé«˜ç²¾åº¦ï¼‰</li>
                          <li>5. <strong>è¯„ä¼°æŒ‡æ ‡ï¼š</strong>Recallä¼˜å…ˆï¼ˆä¸èƒ½æ¼æ‰æµå¤±ç”¨æˆ·ï¼‰ï¼ŒF1-Scoreå¹³è¡¡</li>
                          <li>6. <strong>ä¸šåŠ¡è½åœ°ï¼š</strong>é¢„æµ‹æ¦‚ç‡Top20%ç”¨æˆ·ï¼Œå‘æ”¾ä¼˜æƒ åˆ¸æŒ½å›</li>
                        </ol>
                      </div>

                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-green-900/20 border border-green-700' : 'bg-green-50 border border-green-200'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-green-300' : 'text-green-700'}`}>ä¸šåŠ¡ä»·å€¼</p>
                        <p className={`text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          âœ“ æ¨¡å‹Recall=0.78ï¼ŒæŒ½å›70%æµå¤±ç”¨æˆ· | âœ“ ä¼˜æƒ åˆ¸ROI=3.5ï¼ˆæ¯æŠ•å…¥1å…ƒå¸¦æ¥3.5å…ƒGMVï¼‰ | âœ“ æœˆåº¦æŒ½å›ç”¨æˆ·10ä¸‡+
                        </p>
                      </div>
                    </CardContent>
                  </Card>

                  {/* æ¡ˆä¾‹2ï¼šé”€å”®é¢é¢„æµ‹ */}
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-4">
                      <h3 className={`text-lg font-bold ${theme === 'dark' ? 'text-orange-400' : 'text-orange-600'}`}>
                        ğŸ“¦ æ¡ˆä¾‹2ï¼šå•†å“é”€å”®é¢é¢„æµ‹ â­â­â­â­
                      </h3>
                      
                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>ä¸šåŠ¡èƒŒæ™¯</p>
                        <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                          é›¶å”®ä¼ä¸šéœ€é¢„æµ‹æœªæ¥3ä¸ªæœˆå„å•†å“é”€å”®é¢ï¼Œä¼˜åŒ–å¤‡è´§è®¡åˆ’ï¼Œå‡å°‘åº“å­˜ç§¯å‹
                        </p>
                      </div>

                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-purple-900/20 border border-purple-700' : 'bg-purple-50 border border-purple-200'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-purple-300' : 'text-purple-700'}`}>ç‰¹å¾å·¥ç¨‹äº®ç‚¹</p>
                        <ul className={`text-xs space-y-1 ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          <li>â€¢ <strong>æ—¶é—´ç‰¹å¾ï¼š</strong>å¹´ã€æœˆã€å‘¨ã€æ˜¯å¦èŠ‚å‡æ—¥ã€æ˜¯å¦ä¿ƒé”€å­£</li>
                          <li>â€¢ <strong>æ»åç‰¹å¾ï¼š</strong>è¿‡å»7å¤©/30å¤©/90å¤©é”€é‡å‡å€¼</li>
                          <li>â€¢ <strong>æ»šåŠ¨ç‰¹å¾ï¼š</strong>7å¤©ç§»åŠ¨å¹³å‡ã€30å¤©æŒ‡æ•°å¹³æ»‘</li>
                          <li>â€¢ <strong>ä¿ƒé”€ç‰¹å¾ï¼š</strong>ä¿ƒé”€åŠ›åº¦ã€ä¿ƒé”€å¤©æ•°ã€å†å²ä¿ƒé”€æ•ˆæœ</li>
                        </ul>
                      </div>

                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-green-900/20 border border-green-700' : 'bg-green-50 border border-green-200'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-green-300' : 'text-green-700'}`}>æ¨¡å‹æ•ˆæœ</p>
                        <p className={`text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          âœ“ RMSE=1200ï¼ˆé”€å”®é¢å•ä½ï¼šå…ƒï¼‰ | âœ“ RÂ²=0.85 | âœ“ åº“å­˜ç§¯å‹ç‡ä»25%é™è‡³10% | âœ“ å¹´èŠ‚çœåº“å­˜æˆæœ¬500ä¸‡+
                        </p>
                      </div>
                    </CardContent>
                  </Card>

                  {/* æ¡ˆä¾‹3ï¼šå®¢æˆ·åˆ†ç¾¤ */}
                  <Card className={theme === 'dark' ? 'bg-gray-800 border-gray-700' : 'bg-white'}>
                    <CardContent className="pt-6 space-y-4">
                      <h3 className={`text-lg font-bold ${theme === 'dark' ? 'text-cyan-400' : 'text-cyan-600'}`}>
                        ğŸ‘¥ æ¡ˆä¾‹3ï¼šRFMå®¢æˆ·ç²¾ç»†åŒ–è¿è¥ â­â­â­â­â­
                      </h3>
                      
                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>ä¸šåŠ¡èƒŒæ™¯</p>
                        <p className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                          ç”¨æˆ·é‡å¤§ä½†è¿è¥ç­–ç•¥ç²—æ”¾ï¼Œéœ€æ ¹æ®ç”¨æˆ·ä»·å€¼å’Œæ´»è·ƒåº¦åˆ†ç¾¤ï¼Œåˆ¶å®šå·®å¼‚åŒ–è¿è¥ç­–ç•¥
                        </p>
                      </div>

                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-indigo-900/20 border border-indigo-700' : 'bg-indigo-50 border border-indigo-200'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-indigo-300' : 'text-indigo-700'}`}>4ç±»å®¢æˆ·ç¾¤è¿è¥ç­–ç•¥</p>
                        <div className="grid grid-cols-2 gap-3 mt-2">
                          {[
                            { group: 'é«˜ä»·å€¼å®¢æˆ·', desc: 'ä½Rã€é«˜Fã€é«˜M', strategy: 'VIPä¸“å±æœåŠ¡ã€ç”Ÿæ—¥ç¤¼åŒ…', color: theme === 'dark' ? 'bg-red-900/30' : 'bg-red-100' },
                            { group: 'æµå¤±é¢„è­¦å®¢æˆ·', desc: 'é«˜Rã€ä½Fã€ä½M', strategy: 'å¤§é¢ä¼˜æƒ åˆ¸ã€å¬å›æ´»åŠ¨', color: theme === 'dark' ? 'bg-orange-900/30' : 'bg-orange-100' },
                            { group: 'æ½œåŠ›å®¢æˆ·', desc: 'ä½Rã€ä¸­Fã€ä¸­M', strategy: 'ä¼šå‘˜å‡çº§å¼•å¯¼ã€æ¨èé«˜å•ä»·å•†å“', color: theme === 'dark' ? 'bg-blue-900/30' : 'bg-blue-100' },
                            { group: 'æ™®é€šå®¢æˆ·', desc: 'ä¸­Rã€ä¸­Fã€ä¸­M', strategy: 'å¸¸è§„è¥é”€ã€æå‡å¤è´­', color: theme === 'dark' ? 'bg-gray-700' : 'bg-gray-200' }
                          ].map((item, idx) => (
                            <div key={idx} className={`p-2 rounded ${item.color}`}>
                              <p className={`text-xs font-bold mb-1 ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>{item.group}</p>
                              <p className={`text-xs mb-1 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>{item.desc}</p>
                              <p className={`text-xs ${theme === 'dark' ? 'text-gray-500' : 'text-gray-700'}`}>ç­–ç•¥ï¼š{item.strategy}</p>
                            </div>
                          ))}
                        </div>
                      </div>

                      <div className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-green-900/20 border border-green-700' : 'bg-green-50 border border-green-200'}`}>
                        <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-green-300' : 'text-green-700'}`}>ä¸šåŠ¡ä»·å€¼</p>
                        <p className={`text-xs ${theme === 'dark' ? 'text-gray-300' : 'text-gray-700'}`}>
                          âœ“ é«˜ä»·å€¼å®¢æˆ·ç•™å­˜ç‡æå‡15% | âœ“ æµå¤±ç”¨æˆ·å¬å›ç‡æå‡40% | âœ“ æ•´ä½“ARPUæå‡20% | âœ“ è¥é”€ROIæå‡2.8å€
                        </p>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </section>

              {/* é¡µé¢åº•éƒ¨å®Œæˆæ ‡è®° */}
              <div className={`mt-12 p-6 rounded-xl ${theme === 'dark' ? 'bg-gradient-to-r from-blue-900/30 to-purple-900/30 border border-blue-700' : 'bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200'}`}>
                <div className="flex items-center gap-3 mb-4">
                  <div className={`w-12 h-12 rounded-full flex items-center justify-center ${theme === 'dark' ? 'bg-blue-500' : 'bg-blue-600'}`}>
                    <Brain className="w-6 h-6 text-white" />
                  </div>
                  <div>
                    <h3 className={`text-xl font-bold ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>
                      âœ… æœºå™¨å­¦ä¹ å®Œæ•´çŸ¥è¯†ä½“ç³»å·²å®Œæˆ
                    </h3>
                    <p className={`text-sm ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>
                      16å¤§æ ¸å¿ƒæ¨¡å— + å®Œæ•´Pythonä»£ç  + å®æˆ˜æ¡ˆä¾‹ï¼Œæ•°æ®åˆ†æå¸ˆMLå®Œæ•´çŸ¥è¯†ä½“ç³»ï¼
                    </p>
                  </div>
                </div>
                
                <div className="grid grid-cols-4 gap-3 mb-4">
                  {[
                    { module: '01 MLå…¥é—¨', content: '3å¤§ç±»å‹+12å‘¨è·¯å¾„', icon: 'ğŸš€' },
                    { module: '02 EDAæ¢ç´¢', content: '5æ­¥æµç¨‹+è‡ªåŠ¨åŒ–å·¥å…·', icon: 'ğŸ”' },
                    { module: '03 æ•°æ®é¢„å¤„ç†', content: 'ç¼ºå¤±å€¼+å¼‚å¸¸å€¼+ç¼–ç ', icon: 'ğŸ§¹' },
                    { module: '04 ç‰¹å¾å·¥ç¨‹', content: 'é€‰æ‹©+æ„é€ +è¯„ä¼°', icon: 'âš™ï¸' },
                    { module: '05 æ ·æœ¬ä¸å‡è¡¡', content: 'SMOTE+class_weight', icon: 'âš–ï¸' },
                    { module: '06 åˆ†ç±»ç®—æ³•', content: 'é€»è¾‘å›å½’+RF+XGBoost', icon: 'ğŸ²' },
                    { module: '07 å›å½’ç®—æ³•', content: 'çº¿æ€§+å²­+Lasso', icon: 'ğŸ“ˆ' },
                    { module: '08 èšç±»ç®—æ³•', content: 'K-means+RFMåˆ†ç¾¤', icon: 'ğŸ”®' },
                    { module: '09 æ—¶é—´åºåˆ—', content: 'Prophet+ARIMA+LSTM', icon: 'ğŸ“‰' },
                    { module: '10 å¼‚å¸¸æ£€æµ‹', content: 'IsolationForest+LOF', icon: 'ğŸš¨' },
                    { module: '11 é™ç»´å¯è§†åŒ–', content: 'PCA+t-SNE+UMAP', icon: 'ğŸ“' },
                    { module: '12 é›†æˆå­¦ä¹ ', content: 'LightGBM+CatBoost', icon: 'ğŸ¯' },
                    { module: '13 æ¨¡å‹è§£é‡Š', content: 'SHAP+LIME+PDP', icon: 'ğŸ’¡' },
                    { module: '14 è¯„ä¼°è°ƒä¼˜', content: 'äº¤å‰éªŒè¯+ç½‘æ ¼æœç´¢', icon: 'ğŸ“Š' },
                    { module: '15 æ¨¡å‹éƒ¨ç½²', content: 'FastAPI+ç›‘æ§', icon: 'ğŸš€' },
                    { module: '16 å®æˆ˜æ¡ˆä¾‹', content: 'æµå¤±+é¢„æµ‹+åˆ†ç¾¤', icon: 'ğŸ’¼' }
                  ].map((item, idx) => (
                    <div key={idx} className={`p-3 rounded-lg ${theme === 'dark' ? 'bg-gray-800 border border-gray-700' : 'bg-white border border-gray-200'}`}>
                      <div className="flex items-center gap-2 mb-1">
                        <span className="text-xl">{item.icon}</span>
                        <div className={`text-sm font-bold ${theme === 'dark' ? 'text-gray-200' : 'text-gray-800'}`}>{item.module}</div>
                      </div>
                      <div className={`text-xs ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>{item.content}</div>
                    </div>
                  ))}
                </div>

                <div className={`p-4 rounded-lg ${theme === 'dark' ? 'bg-blue-900/30' : 'bg-blue-100'}`}>
                  <p className={`text-sm font-semibold mb-2 ${theme === 'dark' ? 'text-blue-300' : 'text-blue-700'}`}>
                    ğŸ¯ æ•°æ®åˆ†æå¸ˆMLèƒ½åŠ›æ¨¡å‹ï¼ˆå·²è¾¾æˆï¼‰
                  </p>
                  <div className="grid grid-cols-3 gap-3 text-xs">
                    {[
                      { skill: 'Pythonç¼–ç¨‹', level: 'âœ“ ç†Ÿç»ƒ', desc: 'Pandas/NumPy/Scikit-learn' },
                      { skill: 'æ•°æ®é¢„å¤„ç†', level: 'âœ“ ç²¾é€š', desc: 'ç¼ºå¤±å€¼/å¼‚å¸¸å€¼/ç‰¹å¾å·¥ç¨‹' },
                      { skill: 'ç›‘ç£å­¦ä¹ ', level: 'âœ“ ç²¾é€š', desc: 'åˆ†ç±»/å›å½’/5+ç®—æ³•' },
                      { skill: 'æ— ç›‘ç£å­¦ä¹ ', level: 'âœ“ æŒæ¡', desc: 'èšç±»/RFMåˆ†ç¾¤' },
                      { skill: 'æ¨¡å‹è°ƒä¼˜', level: 'âœ“ ç²¾é€š', desc: 'äº¤å‰éªŒè¯/ç½‘æ ¼æœç´¢' },
                      { skill: 'ä¸šåŠ¡è½åœ°', level: 'âœ“ ç²¾é€š', desc: 'æµå¤±é¢„æµ‹/é”€å”®é¢„æµ‹/å®¢æˆ·åˆ†ç¾¤' }
                    ].map((item, idx) => (
                      <div key={idx} className={`p-2 rounded ${theme === 'dark' ? 'bg-gray-800' : 'bg-white'}`}>
                        <p className={`font-bold mb-1 ${theme === 'dark' ? 'text-green-400' : 'text-green-600'}`}>{item.skill}</p>
                        <p className={`mb-1 ${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'}`}>{item.level}</p>
                        <p className={theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}>{item.desc}</p>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>

      {/* è¿”å›é¡¶éƒ¨æŒ‰é’® */}
      {showScrollTop && (
        <button 
          onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })} 
          className={`fixed bottom-8 right-8 p-3 rounded-full shadow-lg transition-all hover:scale-110 ${theme === 'dark' ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-white hover:bg-gray-100 text-gray-900 border border-gray-200'}`}
          aria-label="è¿”å›é¡¶éƒ¨"
        >
          <ChevronUp size={24} />
        </button>
      )}
    </div>
  )
}

