# SQLç»ƒä¹ é¢˜æ•°æ®é›†

æœ¬ç›®å½•åŒ…å«10ä¸ªçœŸå®çš„CSVæ•°æ®é›†ï¼Œå¯¹åº”SQLç»ƒä¹ é¡µé¢çš„å„ä¸ªé¢˜ç›®ã€‚

---

## ğŸ“ æ•°æ®é›†æ¸…å•

| æ•°æ®é›† | è¡Œæ•° | å¤§å° | å¯¹åº”é¢˜ç›® | è¯´æ˜ |
|--------|------|------|---------|------|
| `orders.csv` | 252 | 8.7 KB | çª—å£å‡½æ•°-é¢˜1 | ç”¨æˆ·è®¢å•è®°å½• |
| `daily_sales.csv` | 180 | 3.7 KB | çª—å£å‡½æ•°-é¢˜2 | æ—¥é”€å”®é¢æ•°æ® |
| `monthly_sales.csv` | 72 | 1.6 KB | çª—å£å‡½æ•°-é¢˜3 | æœˆåº¦é”€å”®æ•°æ® |
| `transactions.csv` | 464 | 16.5 KB | çª—å£å‡½æ•°-é¢˜4 | äº¤æ˜“æ˜ç»†æµæ°´ |
| `user_logins.csv` | 671 | 11.2 KB | çª—å£å‡½æ•°-é¢˜5 | ç”¨æˆ·ç™»å½•è®°å½• |
| `product_sales.csv` | 16 | 0.5 KB | åŸºç¡€æŸ¥è¯¢-é¢˜1 | å•†å“é”€å”®ç»Ÿè®¡ |
| `employees.csv` | 60 | 2.4 KB | åŸºç¡€æŸ¥è¯¢-é¢˜2 | å‘˜å·¥ä¿¡æ¯è¡¨ |
| `student_scores.csv` | 500 | 14.2 KB | ä¸šåŠ¡åº”ç”¨-é¢˜1 | å­¦ç”Ÿæˆç»©è¡¨ |
| `page_views.csv` | 1,026 | 36.5 KB | ä¸šåŠ¡åº”ç”¨-é¢˜2 | é¡µé¢è®¿é—®æ—¥å¿— |
| `inventory_changes.csv` | 546 | 18.8 KB | ä¸šåŠ¡åº”ç”¨-é¢˜3 | åº“å­˜å˜åŠ¨è®°å½• |

**æ€»è®¡**: 10ä¸ªæ•°æ®é›† | 3,787è¡Œæ•°æ® | ~115 KB

---

## ğŸ“– æ•°æ®é›†è¯¦ç»†è¯´æ˜

### 1. orders.csv - ç”¨æˆ·è®¢å•è®°å½•

**å­—æ®µ**:
- `order_id`: è®¢å•ID
- `user_id`: ç”¨æˆ·ID (101-150)
- `amount`: è®¢å•é‡‘é¢ (30-300å…ƒ)
- `created_at`: åˆ›å»ºæ—¶é—´ (2024-01-01 ~ 2024-03-31)

**ä¸šåŠ¡åœºæ™¯**: ç”µå•†è®¢å•æ•°æ®ï¼Œæ¯ä¸ªç”¨æˆ·æœ‰2-8ç¬”è®¢å•

**SQLé¢˜ç›®**: è®¡ç®—æ¯ä¸ªç”¨æˆ·æœ€è¿‘ä¸€æ¬¡è®¢å•é‡‘é¢ï¼ˆROW_NUMBERçª—å£å‡½æ•°ï¼‰

---

### 2. daily_sales.csv - æ—¥é”€å”®é¢æ•°æ®

**å­—æ®µ**:
- `product_id`: å•†å“ID (1, 2, 3)
- `sale_date`: é”€å”®æ—¥æœŸ (60å¤©)
- `amount`: é”€å”®é¢

**ä¸šåŠ¡åœºæ™¯**: 3ä¸ªå•†å“çš„æ—¥é”€å”®é¢ï¼ŒåŒ…å«è¶‹åŠ¿å’Œéšæœºæ³¢åŠ¨

**SQLé¢˜ç›®**: è®¡ç®—7æ—¥ç§»åŠ¨å¹³å‡é”€å”®é¢ï¼ˆROWSçª—å£å¸§ï¼‰

---

### 3. monthly_sales.csv - æœˆåº¦é”€å”®æ•°æ®

**å­—æ®µ**:
- `product_id`: å•†å“ID (P001, P002, P003)
- `year`: å¹´ä»½ (2023, 2024)
- `month`: æœˆä»½ (1-12)
- `amount`: é”€å”®é¢

**ä¸šåŠ¡åœºæ™¯**: 2å¹´24ä¸ªæœˆçš„æœˆåº¦é”€å”®æ•°æ®ï¼Œå«åŒæ¯”å¢é•¿

**SQLé¢˜ç›®**: è®¡ç®—åŒæ¯”å¢é•¿ç‡ï¼ˆLAGçª—å£å‡½æ•°ï¼‰

---

### 4. transactions.csv - äº¤æ˜“æ˜ç»†æµæ°´

**å­—æ®µ**:
- `transaction_id`: äº¤æ˜“ID
- `user_id`: ç”¨æˆ·ID (1001-1050)
- `amount`: äº¤æ˜“é‡‘é¢
- `transaction_date`: äº¤æ˜“æ—¶é—´

**ä¸šåŠ¡åœºæ™¯**: 50ä¸ªç”¨æˆ·çš„464ç¬”äº¤æ˜“è®°å½•

**SQLé¢˜ç›®**: è®¡ç®—ç”¨æˆ·ç´¯è®¡æ¶ˆè´¹é‡‘é¢ï¼ˆSUMçª—å£å‡½æ•°ï¼‰

---

### 5. user_logins.csv - ç”¨æˆ·ç™»å½•è®°å½•

**å­—æ®µ**:
- `user_id`: ç”¨æˆ·ID (2001-2030)
- `login_date`: ç™»å½•æ—¥æœŸ

**ä¸šåŠ¡åœºæ™¯**: 30ä¸ªç”¨æˆ·çš„è¿ç»­ç™»å½•è®°å½•ï¼ŒåŒ…å«ä¸­æ–­

**SQLé¢˜ç›®**: è®¡ç®—æœ€å¤§è¿ç»­ç™»å½•å¤©æ•°ï¼ˆå¤æ‚çª—å£å‡½æ•°ï¼‰

---

### 6. product_sales.csv - å•†å“é”€å”®ç»Ÿè®¡

**å­—æ®µ**:
- `product_id`: å•†å“ID
- `product_name`: å•†å“åç§°
- `category`: å•†å“ç±»åˆ«ï¼ˆ4ç±»ï¼Œæ¯ç±»4ä¸ªå•†å“ï¼‰
- `sales`: é”€é‡

**ä¸šåŠ¡åœºæ™¯**: 16ä¸ªå•†å“çš„é”€å”®ç»Ÿè®¡ï¼Œåˆ†å±4ä¸ªç±»åˆ«

**SQLé¢˜ç›®**: è®¡ç®—æ¯ä¸ªç±»åˆ«çš„é”€å”®æ’åï¼ˆRANK/DENSE_RANKï¼‰

---

### 7. employees.csv - å‘˜å·¥ä¿¡æ¯è¡¨

**å­—æ®µ**:
- `employee_id`: å‘˜å·¥ID (1001+)
- `name`: å§“å
- `department`: éƒ¨é—¨ (5ä¸ªéƒ¨é—¨)
- `position`: èŒä½ (ç»ç†/ä¸»ç®¡/ä¸“å‘˜/åŠ©ç†)
- `salary`: å·¥èµ„ (5000-30000)

**ä¸šåŠ¡åœºæ™¯**: 5ä¸ªéƒ¨é—¨å…±60åå‘˜å·¥çš„è–ªèµ„æ•°æ®

**SQLé¢˜ç›®**: æŸ¥è¯¢é«˜äºéƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ï¼ˆå­æŸ¥è¯¢ï¼‰

---

### 8. student_scores.csv - å­¦ç”Ÿæˆç»©è¡¨

**å­—æ®µ**:
- `student_id`: å­¦å· (10001-10100)
- `student_name`: å§“å
- `subject`: ç§‘ç›® (æ•°å­¦/è¯­æ–‡/è‹±è¯­/ç‰©ç†/åŒ–å­¦)
- `score`: æˆç»© (60-100)

**ä¸šåŠ¡åœºæ™¯**: 100ä¸ªå­¦ç”Ÿï¼Œ5é—¨è¯¾ç¨‹çš„æˆç»©æ•°æ®

**SQLé¢˜ç›®**: è®¡ç®—æ¯ä¸ªå­¦ç”Ÿçš„å¹³å‡åˆ†å’Œæ’å

---

### 9. page_views.csv - é¡µé¢è®¿é—®æ—¥å¿—

**å­—æ®µ**:
- `session_id`: ä¼šè¯ID (5001-5200)
- `user_id`: ç”¨æˆ·ID (1-100)
- `page_url`: é¡µé¢URL (/home, /product, /cart, /checkout, /about)
- `visit_time`: è®¿é—®æ—¶é—´

**ä¸šåŠ¡åœºæ™¯**: 200ä¸ªä¼šè¯çš„é¡µé¢è®¿é—®è·¯å¾„ï¼Œæ¨¡æ‹Ÿè´­ç‰©æ¼æ–—

**SQLé¢˜ç›®**: è®¡ç®—è½¬åŒ–æ¼æ–—ï¼ˆå¤šè¡¨å…³è”+èšåˆï¼‰

---

### 10. inventory_changes.csv - åº“å­˜å˜åŠ¨è®°å½•

**å­—æ®µ**:
- `change_id`: å˜åŠ¨ID
- `product_id`: å•†å“ID (3001-3020)
- `change_type`: å˜åŠ¨ç±»å‹ (å…¥åº“/å‡ºåº“)
- `change_quantity`: å˜åŠ¨æ•°é‡
- `change_date`: å˜åŠ¨æ—¥æœŸ
- `stock_after`: å˜åŠ¨ååº“å­˜

**ä¸šåŠ¡åœºæ™¯**: 20ä¸ªå•†å“30å¤©çš„åº“å­˜è¿›å‡ºè®°å½•

**SQLé¢˜ç›®**: è®¡ç®—æ¯ä¸ªå•†å“çš„åº“å­˜å‘¨è½¬ç‡

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### åœ¨SQLä¸­å¯¼å…¥

```sql
-- MySQLç¤ºä¾‹
LOAD DATA INFILE 'orders.csv'
INTO TABLE orders
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 ROWS;
```

### åœ¨Pythonä¸­ä½¿ç”¨

```python
import pandas as pd

# è¯»å–æ•°æ®
df = pd.read_csv('orders.csv')

# ç¤ºä¾‹ï¼šè®¡ç®—æ¯ä¸ªç”¨æˆ·æœ€è¿‘ä¸€æ¬¡è®¢å•
df['created_at'] = pd.to_datetime(df['created_at'])
result = df.sort_values('created_at').groupby('user_id').last()[['amount']]
print(result)
```

### åœ¨SQLç»ƒä¹ é¡µé¢ä¸­ä½¿ç”¨

1. æ‰“å¼€"SQL & Pandas ç»ƒä¹ é¢˜"é¡µé¢
2. é€‰æ‹©å¯¹åº”é¢˜ç›®
3. ç‚¹å‡»"æŸ¥çœ‹æ•°æ®é›†"æŒ‰é’®
4. ä¸‹è½½CSVæ–‡ä»¶åˆ°æœ¬åœ°
5. åœ¨MySQL/PostgreSQL/SQLiteä¸­å¯¼å…¥
6. ç¼–å†™SQLæŸ¥è¯¢éªŒè¯ç­”æ¡ˆ

---

## ğŸ“Š æ•°æ®ç‰¹ç‚¹

### çœŸå®æ€§
- âœ… åŸºäºçœŸå®ä¸šåŠ¡åœºæ™¯ç”Ÿæˆ
- âœ… åŒ…å«åˆç†çš„æ•°æ®åˆ†å¸ƒå’Œè¶‹åŠ¿
- âœ… æœ‰éšæœºå™ªå£°å’Œå¼‚å¸¸å€¼
- âœ… æ—¶é—´åºåˆ—ç¬¦åˆä¸šåŠ¡è§„å¾‹

### å¤æ‚åº¦
- âœ… æ•°æ®è§„æ¨¡é€‚ä¸­ï¼ˆ60-1000è¡Œï¼‰
- âœ… åŒ…å«å¤šç§æ•°æ®ç±»å‹ï¼ˆæ•°å€¼/å­—ç¬¦/æ—¥æœŸï¼‰
- âœ… æœ‰ä¸€å¯¹å¤šå…³ç³»
- âœ… é€‚åˆç»ƒä¹ å„ç§SQLæŠ€å·§

### å¯æ‰©å±•æ€§
- âœ… å¯ä¿®æ”¹ç”Ÿæˆè„šæœ¬æ‰©å¤§è§„æ¨¡
- âœ… å¯æ·»åŠ æ›´å¤šå­—æ®µ
- âœ… å¯è°ƒæ•´ä¸šåŠ¡è§„åˆ™

---

## ğŸ¯ å­¦ä¹ å»ºè®®

### åˆçº§ï¼ˆåŸºç¡€æŸ¥è¯¢ï¼‰
1. å…ˆä»`product_sales.csv`å’Œ`employees.csv`å¼€å§‹
2. ç»ƒä¹ SELECTã€WHEREã€GROUP BY
3. æŒæ¡èšåˆå‡½æ•°ï¼ˆCOUNTã€SUMã€AVGï¼‰

### ä¸­çº§ï¼ˆçª—å£å‡½æ•°ï¼‰
1. ä½¿ç”¨`orders.csv`ç»ƒä¹ ROW_NUMBER
2. ä½¿ç”¨`daily_sales.csv`ç»ƒä¹ ç§»åŠ¨å¹³å‡
3. ä½¿ç”¨`monthly_sales.csv`ç»ƒä¹ LAG/LEAD

### é«˜çº§ï¼ˆå¤æ‚æŸ¥è¯¢ï¼‰
1. ä½¿ç”¨`transactions.csv`ç»ƒä¹ ç´¯è®¡æ±‚å’Œ
2. ä½¿ç”¨`user_logins.csv`ç»ƒä¹ è¿ç»­åºåˆ—
3. ä½¿ç”¨`page_views.csv`ç»ƒä¹ æ¼æ–—åˆ†æ

---

## ğŸ”„ æ•°æ®æ›´æ–°

### é‡æ–°ç”Ÿæˆ

```bash
python scripts/generate_sql_datasets.py
```

### è‡ªå®šä¹‰å‚æ•°

ä¿®æ”¹è„šæœ¬ä¸­çš„å‚æ•°ï¼š
- ç”¨æˆ·æ•°é‡
- æ—¶é—´èŒƒå›´
- æ•°æ®è§„æ¨¡
- ä¸šåŠ¡è§„åˆ™

---

## ğŸ“ é¢˜ç›®å¯¹ç…§è¡¨

| æ•°æ®é›† | é¢˜ç›®ç¼–å· | éš¾åº¦ | æ ¸å¿ƒæŠ€æœ¯ç‚¹ |
|--------|---------|------|-----------|
| orders.csv | sql-win-1 | â­â­â­ | ROW_NUMBER |
| daily_sales.csv | sql-win-2 | â­â­â­ | çª—å£å¸§ï¼ˆROWSï¼‰ |
| monthly_sales.csv | sql-win-3 | â­â­â­â­ | LAG/åŒæ¯” |
| transactions.csv | sql-win-4 | â­â­â­ | SUM OVER |
| user_logins.csv | sql-win-5 | â­â­â­â­â­ | è¿ç»­åºåˆ— |
| product_sales.csv | sql-basic-1 | â­â­ | RANK |
| employees.csv | sql-basic-2 | â­â­ | å­æŸ¥è¯¢ |
| student_scores.csv | sql-business-1 | â­â­â­ | é€è§†è¡¨ |
| page_views.csv | sql-business-2 | â­â­â­â­ | æ¼æ–—åˆ†æ |
| inventory_changes.csv | sql-business-3 | â­â­â­â­ | åº“å­˜è®¡ç®— |

---

## ğŸ’¡ æ‰©å±•ç»ƒä¹ 

### ç»„åˆä½¿ç”¨å¤šä¸ªæ•°æ®é›†

```sql
-- ç»“åˆorders.csvå’Œtransactions.csv
-- åˆ†æç”¨æˆ·çš„è®¢å•é¢‘ç‡å’Œäº¤æ˜“é‡‘é¢çš„å…³ç³»
SELECT 
    o.user_id,
    COUNT(DISTINCT o.order_id) as order_count,
    COUNT(t.transaction_id) as transaction_count,
    SUM(t.amount) as total_amount
FROM orders o
LEFT JOIN transactions t ON o.user_id = t.user_id
GROUP BY o.user_id;
```

### æ—¶é—´åºåˆ—åˆ†æ

```sql
-- ä½¿ç”¨daily_sales.csv
-- è®¡ç®—é”€å”®é¢çš„ç§»åŠ¨å¹³å‡å’Œæ ‡å‡†å·®
SELECT 
    sale_date,
    amount,
    AVG(amount) OVER(ORDER BY sale_date ROWS 6 PRECEDING) as ma_7,
    STDDEV(amount) OVER(ORDER BY sale_date ROWS 29 PRECEDING) as std_30
FROM daily_sales;
```

---

*ç”Ÿæˆè„šæœ¬: `scripts/generate_sql_datasets.py`*  
*æœ€åæ›´æ–°: 2023-10-05*


